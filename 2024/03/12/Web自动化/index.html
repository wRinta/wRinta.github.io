<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Elora">
    
    <title>
        
            Web自动化 |
        
        Elora blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/icon16.png">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"}
    KEEP.theme_config = {"base_info":{"primary_color":"#ffe8e9","title":"Elora blog","author":"Elora","avatar":"/images/icon40.png","logo":"/images/icon40.png","favicon":"/images/icon16.png"},"menu":{"home":"/ || fa-solid fa-home","archives":"/archives || fa-solid fa-box-archive","tags":"/tags || fa-solid fa-tags","categories":"/categories || fa-solid fa-layer-group"},"first_screen":{"enable":true,"background_img":"/images/pmgroup.png","background_img_dark":"/images/pmgroup.png","description":"Heroes never die!","hitokoto":false},"social_contact":{"enable":true,"links":{"github":"https://github.com/wRinta","weixin":"img | /images/wechat.png","qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":"wsq1357812@163.com"}},"scroll":{"progress_bar":true,"percent":true,"hide_header":true},"home":{"announcement":"评论没有实时通知！","category":true,"tag":true,"post_datetime":"updated || fa-solid fa-hourglass-start","post_datetime_format":"YYYY-MM-DD HH:mm:ss"},"post":{"author_badge":{"enable":true,"level_badge":false,"custom_badge":["Rinta!"]},"word_count":{"wordcount":true,"min2read":true},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":true,"share":true,"reward":{"enable":true,"img_link":"/images/reward.png","text":"请作者喝奶茶","img_align":"right"}},"code_block":{"tools":{"enable":true,"style":"mac"},"highlight_theme":"default"},"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true,"layout":"left"},"website_count":{"busuanzi_count":{"enable":true,"site_uv":true,"site_pv":true,"page_pv":true}},"local_search":{"enable":true,"preload":true},"comment":{"enable":true,"use":"valine","valine":{"appid":"oKezB5PXBe6SFd75Ab2I1igt-gzGzoHsz","appkey":"ZyjE4IekdBOYhHEQyVhPqWf9","server_urls":null,"placeholder":"say something.."},"gitalk":{"github_id":"wRinta","github_admins":null,"repository":"repoforcomment","client_id":"78ba639dca276f6befb3","client_secret":"d893b8494166a18989ce599c8e362ccc307f3be9","proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.21"},"waline":{"server_url":null,"reaction":false,"version":2},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":true},"footer":{"since":2020,"word_count":true,"icp":{"enable":false,"record_code":null,"url":"https://beian.miit.gov.cn"},"site_deploy":{"enable":true,"provider":"github","url":null},"shields_style":{"enable":false,"custom":[{"link_url":null,"img_url":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","source_data":{},"version":"4.1.0"}
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"}
    KEEP.language_code_block = {"copy":"Copy code","copied":"Copied","fold":"Fold code block","folded":"Folded"}
    KEEP.language_copy_copyright = {"copy":"Copy copyright info","copied":"Copied","title":"Original post title","author":"Original post author","link":"Original post link"}
  </script>
<meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="hexo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i>
    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/icon40.png">
                </a>
            
            <a class="site-name border-box" href="/">
               Elora blog
            </a>
        </div>

        <div class="right border-box">
            <div class="pc">
                <ul class="menu-list">
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                
                                    <i class="menu-icon fa-solid fa-home"></i>
                                
                                HOME
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                
                                    <i class="menu-icon fa-solid fa-box-archive"></i>
                                
                                ARCHIVES
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                
                                    <i class="menu-icon fa-solid fa-tags"></i>
                                
                                TAGS
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                
                                    <i class="menu-icon fa-solid fa-layer-group"></i>
                                
                                CATEGORIES
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/"
                    >HOME</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives"
                    >ARCHIVES</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags"
                    >TAGS</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories"
                    >CATEGORIES</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        Web自动化
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/icon40.png">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">Elora</span>
                                
                                    <span class="author-badge">Rinta!</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2024-03-12 11:02:44</span>
            </span>

            <span class="meta-info-item post-update-date">
                <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                <span class="datetime" data-updated="Fri Apr 19 2024 15:46:52 GMT+0800">2024-04-19 15:46:52</span>
            </span>
        

        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/test/">test</a></li>
                        
                    
                </ul>
            </span>
        

        
        
            <span class="meta-info-item post-wordcount">
                <i class="icon fas fa-file-word"></i>&nbsp;<span>10k Words</span>
            </span>
        
        
            <span class="meta-info-item post-min2read">
                <i class="icon fas fa-clock"></i>&nbsp;<span>48 Mins</span>
            </span>
        
        
            <span class="meta-info-item post-pv">
                <i class="icon fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
            </span>
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body">
                    

                    <p>自动化测试解决的问题：回归测试、压力测试、兼容性测试。</p>
<p>自动化测试的误区：自动化测试可以完全代替手工测试，自动化测试一定比手工测试更厉害，自动化测试可以捕获更多的bug，自动化测试适用于所有功能</p>
<blockquote>
<p>什么样的web项目适合做自动化测试？</p>
<ol>
<li>需求变动不频繁</li>
<li>项目周期长</li>
<li>项目需要回归测试</li>
</ol>
</blockquote>
<p>自动化测试在什么阶段开始–&gt;功能测试完毕（手工测试）</p>
<blockquote>
<p>web自动化属于黑盒测试（功能测试）</p>
</blockquote>
<h1 id="元素定位"><a href="#元素定位" class="headerlink" title="元素定位"></a>元素定位</h1><p>元素定位就是通过元素的信息或元素层级结构来定位</p>
<p>selenium提供的8种定位元素方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. id</span><br><span class="line">2. name</span><br><span class="line">3. class_name</span><br><span class="line">4. tag_name(&lt;标签名.../&gt;)</span><br><span class="line">5. link_text(定位超链接a标签)</span><br><span class="line">6. partial_link_text(定位超链接a标签 模糊)</span><br><span class="line">7. XPath(基于元素路径)</span><br><span class="line">8. CSS(元素选择器)</span><br></pre></td></tr></table></figure>

<h2 id="id定位"><a href="#id定位" class="headerlink" title="id定位"></a>id定位</h2><p>html规定id属性在整个html文档中必须是唯一的</p>
<p><code>el=driver.find_element(by=By.ID, value=&#39;id值&#39;)</code></p>
<p>打开百度输入内容进行查询</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com&quot;</span>)</span><br><span class="line"><span class="comment"># 通过id定位搜索框</span></span><br><span class="line">el = browser.find_element(by=By.ID, value=<span class="string">&#x27;kw&#x27;</span>)</span><br><span class="line"><span class="comment"># 搜索框输入内容</span></span><br><span class="line">el.send_keys(<span class="string">&#x27;怪物猎人&#x27;</span>)</span><br><span class="line"><span class="comment"># 通过id查找搜索按钮并点击</span></span><br><span class="line">browser.find_element(by=By.ID, value=<span class="string">&#x27;su&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br><span class="line">browser.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/id.png"></p>
<h2 id="name定位"><a href="#name定位" class="headerlink" title="name定位"></a>name定位</h2><p>html中name属性值是可以重复的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com&quot;</span>)</span><br><span class="line">browser.find_element(by=By.NAME,value=<span class="string">&#x27;wd&#x27;</span>).clear()</span><br><span class="line">el = browser.find_element(by=By.NAME, value=<span class="string">&#x27;wd&#x27;</span>)</span><br><span class="line">el.send_keys(<span class="string">&#x27;索尼&#x27;</span>)</span><br><span class="line">browser.find_element(by=By.ID, value=<span class="string">&#x27;su&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br><span class="line">browser.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/nameexample.png"></p>
<h2 id="class-name定位"><a href="#class-name定位" class="headerlink" title="class name定位"></a>class name定位</h2><p>根据元素class属性值定位元素，html通过class来定义元素的样式。如果class有多个属性值，只使用其中一个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&quot;https://www.bilibili.com/&quot;</span>)</span><br><span class="line">browser.find_element(by=By.CLASS_NAME, value=<span class="string">&#x27;channel-link&#x27;</span>).click() <span class="comment"># 有多个相同元素，返回第一个</span></span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/class.png"></p>
<p>查找第三个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&quot;https://www.bilibili.com/&quot;</span>)</span><br><span class="line">browser.find_elements(by=By.CLASS_NAME, value=<span class="string">&#x27;channel-link&#x27;</span>)[<span class="number">2</span>].click()</span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/classlist.png"></p>
<h2 id="tag-name定位"><a href="#tag-name定位" class="headerlink" title="tag_name定位"></a>tag_name定位</h2><p>通过标签名来定位，一般有多个。如果存在多个相同标签则返回第一个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line">dr = webdriver.Chrome()</span><br><span class="line">dr.get(<span class="string">&#x27;https://www.csdn.net/&#x27;</span>)</span><br><span class="line">dr.find_elements(By.TAG_NAME, <span class="string">&#x27;dl&#x27;</span>)[<span class="number">0</span>].click()</span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/tagname.png"></p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/tagname2.png"></p>
<h2 id="link-text"><a href="#link-text" class="headerlink" title="link_text"></a>link_text</h2><p>定位a标签，link_text定位元素的内容必须全部匹配（不然会报错）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&#x27;https://rinta.top/&#x27;</span>)</span><br><span class="line">browser.find_element(By.LINK_TEXT,<span class="string">&#x27;Python&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/linktext.png"></p>
<h2 id="partial-link-text"><a href="#partial-link-text" class="headerlink" title="partial_link_text"></a>partial_link_text</h2><p>模糊匹配linktext定位找到元素，但是要保证唯一性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&#x27;https://rinta.top/&#x27;</span>)</span><br><span class="line">browser.find_element(By.LINK_TEXT,<span class="string">&#x27;Python&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.find_element(By.PARTIAL_LINK_TEXT,<span class="string">&#x27;AR&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/partial.png"></p>
<h2 id="Xpath"><a href="#Xpath" class="headerlink" title="Xpath"></a>Xpath</h2><p>xpath是XML路径定位器，HTML与XML相似，所以也可以用xpath来定位。针对定位到多个元素时也可以下标取值，下标从1开始</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//*[text()=<span class="string">&quot;xxx&quot;</span>]     <span class="comment"># 文本内容是xxx的元素</span></span><br><span class="line">//*[contains(@attribute,<span class="string">&#x27;xxx&#x27;</span>)] <span class="comment"># 属性中含有xxx的元素</span></span><br><span class="line">//*[starts-<span class="keyword">with</span>(@attribute,<span class="string">&#x27;xxx&#x27;</span>)] <span class="comment"># 属性以xxx开头的元素</span></span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>nodename</td>
<td>选取此节点的所有子节点</td>
</tr>
<tr>
<td>&#x2F;</td>
<td>从当前节点选取直接子节点</td>
</tr>
<tr>
<td>&#x2F;&#x2F;</td>
<td>从当前节点选取子孙节点</td>
</tr>
<tr>
<td>.</td>
<td>选取当前节点</td>
</tr>
<tr>
<td>. .</td>
<td>选取当前节点的父节点</td>
</tr>
<tr>
<td>@</td>
<td>选取属性</td>
</tr>
<tr>
<td>*</td>
<td>任何元素</td>
</tr>
</tbody></table>
<h3 id="通过路径定位"><a href="#通过路径定位" class="headerlink" title="通过路径定位"></a>通过路径定位</h3><p>绝对路径：以&#x2F;开头，不能跳级</p>
<p>相对路径：以&#x2F;&#x2F;开头，后跟元素名称，不知道名称可以用*代替（*代表所有元素）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line">dr = webdriver.Chrome()</span><br><span class="line">dr.get(<span class="string">&#x27;https://www.bilibili.com/&#x27;</span>)</span><br><span class="line">dr.find_element(By.XPATH, value=<span class="string">&#x27;//*[@id=&quot;i_cecream&quot;]/div[2]/div[1]/div[3]/div[2]/div[1]/a[8]&#x27;</span>).click()<span class="comment"># @为添加属性,//开头为相对路径</span></span><br><span class="line"><span class="comment"># value=&#x27;//*[@class=&quot;channel-items__left&quot;]/a[8]</span></span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br><span class="line">//*</span><br></pre></td></tr></table></figure>



<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/xpath.png"></p>
<h3 id="利用元素属性"><a href="#利用元素属性" class="headerlink" title="利用元素属性"></a>利用元素属性</h3><p><code>dr.find_element(By.XPATH, value=&#39;//*[@id=&quot;i_cecream&quot;]/div[2]/div[1]/div[3]/div[2]/div[1]/a[8]&#39;).click()# @修饰属性</code></p>
<h3 id="属性和逻辑结合"><a href="#属性和逻辑结合" class="headerlink" title="属性和逻辑结合"></a>属性和逻辑结合</h3><p>通过and连接两个属性</p>
<p><code>//*[@id=&#39;id值&#39; and @属性=&#39;属性值&#39;]</code></p>
<h3 id="层级与属性结合"><a href="#层级与属性结合" class="headerlink" title="层级与属性结合"></a>层级与属性结合</h3><p><code>//*[@id=&#39;父级id值&#39; ]/input</code></p>
<h2 id="css选择器"><a href="#css选择器" class="headerlink" title="css选择器"></a>css选择器</h2><p>css用来描述html元素的显示样式，在css中，选择题是一种模式用于选择需要添加样式的元素。</p>
<p>css定位常用策略：id选择器、class选择器、元素选择器、属性选择器、层级选择器</p>
<p><strong>符号.代表class, 符号 # 代表id</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># id选择器</span></span><br><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com&quot;</span>)</span><br><span class="line"><span class="comment"># 通过css定位搜索框,#代表id</span></span><br><span class="line">el = browser.find_element(by=By.CSS_SELECTOR, value=<span class="string">&#x27;#kw&#x27;</span>)</span><br><span class="line"><span class="comment"># 搜索框输入内容</span></span><br><span class="line">el.send_keys(<span class="string">&#x27;怪物猎人&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/css1.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.bilibili.com/&quot;</span>)</span><br><span class="line"><span class="comment"># 通过css定位搜索框,#代表id,结合xpath</span></span><br><span class="line">el = browser.find_element(by=By.CSS_SELECTOR, value=<span class="string">&#x27;#i_cecream &gt; div.bili-feed4 &gt; div.bili-header.large-header &gt; div.bili-header__channel &gt; div.right-channel-container &gt; div.channel-items__left &gt; a:nth-child(6)&#x27;</span></span><br><span class="line"><span class="comment"># el = browser.find_element(by=By.CSS_SELECTOR, value=&#x27;.channel-items__left &gt; a:nth-child(6)&#x27;)                     </span></span><br><span class="line"><span class="comment"># 搜索框输入内容</span></span><br><span class="line">el.click()</span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br><span class="line">browser.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/css2.png"></p>
<h3 id="定位下拉框"><a href="#定位下拉框" class="headerlink" title="定位下拉框"></a>定位下拉框</h3><h4 id="通过css定位"><a href="#通过css定位" class="headerlink" title="通过css定位"></a>通过css定位</h4><p><code>[属性名=属性值]</code>定位</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.select <span class="keyword">import</span> Select</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 最大化窗口</span></span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 隐式等待，每次查找元素前等待</span></span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>) </span><br><span class="line">browser.get(<span class="string">&quot;https://www.ke.com/city/&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 找到下拉框元素</span></span><br><span class="line">el = browser.find_elements(By.CSS_SELECTOR, value=<span class="string">&#x27;.chang-city&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">el.click()</span><br><span class="line"><span class="comment"># []来指定属性值</span></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;[data-province_id=&quot;130000&quot;]&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/cssselect.png"></p>
<h4 id="通过select类定位"><a href="#通过select类定位" class="headerlink" title="通过select类定位"></a>通过select类定位</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># value</span></span><br><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.select <span class="keyword">import</span> Select</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">browser.get(</span><br><span class="line">    <span class="string">&quot;https://signup.live.com/signup?lcid=1033&amp;wa=wsignin1.0&amp;rpsnv=13&amp;ct=1667977589&amp;rver=7.0.6737.0&amp;wp=MBI_SSL&amp;wreply=https%3a%2f%2foutlook.live.com%2fowa%2f%3fnlp%3d1%26signup%3d1%26RpsCsrfState%3d03e6f63b-7b44-e3a7-1cec-67445341a6de&amp;id=292841&amp;CBCXT=out&amp;lw=1&amp;fl=dob%2cflname%2cwld&amp;cobrandid=90015&amp;lic=1&amp;uaid=5cd6f6e2004b4d5f96bcb3f20e670a07&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#iSignupAction&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 找到下拉框元素</span></span><br><span class="line"><span class="comment"># 使id属性定位下拉框</span></span><br><span class="line">el = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#LiveDomainBoxList&#x27;</span>)</span><br><span class="line"><span class="comment"># 使name属性定位下拉框</span></span><br><span class="line">el = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;[name = LiveDomainBoxList]&#x27;</span>)</span><br><span class="line"><span class="comment"># option通过value定位</span></span><br><span class="line">Select(el).select_by_value(<span class="string">&#x27;hotmail.com&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/selectvalue.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index</span></span><br><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.select <span class="keyword">import</span> Select</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">browser.get(</span><br><span class="line">    <span class="string">&quot;https://signup.live.com/signup?lcid=1033&amp;wa=wsignin1.0&amp;rpsnv=13&amp;ct=1667977589&amp;rver=7.0.6737.0&amp;wp=MBI_SSL&amp;wreply=https%3a%2f%2foutlook.live.com%2fowa%2f%3fnlp%3d1%26signup%3d1%26RpsCsrfState%3d03e6f63b-7b44-e3a7-1cec-67445341a6de&amp;id=292841&amp;CBCXT=out&amp;lw=1&amp;fl=dob%2cflname%2cwld&amp;cobrandid=90015&amp;lic=1&amp;uaid=5cd6f6e2004b4d5f96bcb3f20e670a07&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#iSignupAction&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># # 找到下拉框元素</span></span><br><span class="line">el = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#LiveDomainBoxList&#x27;</span>)</span><br><span class="line"><span class="comment"># 使用index定位下拉框</span></span><br><span class="line">Select(el).select_by_index(<span class="number">1</span>)</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># visible_text</span></span><br><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.select <span class="keyword">import</span> Select</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">browser.get(</span><br><span class="line">    <span class="string">&quot;https://signup.live.com/signup?lcid=1033&amp;wa=wsignin1.0&amp;rpsnv=13&amp;ct=1667977589&amp;rver=7.0.6737.0&amp;wp=MBI_SSL&amp;wreply=https%3a%2f%2foutlook.live.com%2fowa%2f%3fnlp%3d1%26signup%3d1%26RpsCsrfState%3d03e6f63b-7b44-e3a7-1cec-67445341a6de&amp;id=292841&amp;CBCXT=out&amp;lw=1&amp;fl=dob%2cflname%2cwld&amp;cobrandid=90015&amp;lic=1&amp;uaid=5cd6f6e2004b4d5f96bcb3f20e670a07&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#iSignupAction&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># # 找到下拉框元素</span></span><br><span class="line">el = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#LiveDomainBoxList&#x27;</span>)</span><br><span class="line"><span class="comment"># 使用visible_text属性定位下拉框（文本）</span></span><br><span class="line">Select(el).select_by_visible_text(<span class="string">&#x27;hotmail.com&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">Select(el).select_by_visible_text(<span class="string">&#x27;outlook.com&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<h3 id="警告框处理"><a href="#警告框处理" class="headerlink" title="警告框处理"></a>警告框处理</h3><p>Selenium中对处理弹出框的操作，有专用的处理方法，并且处理方式都一样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 获取弹出框对象</span><br><span class="line">alert=driver.switch_to.alert</span><br><span class="line"><span class="number">2.</span> 调用</span><br><span class="line">alert.text        ---&gt; 返回alert/confirm/prompt中文字信息</span><br><span class="line">alert.accept()   ---&gt;接受对话框选项</span><br><span class="line">alert.dismiss()  ---&gt;取消对话框选项</span><br></pre></td></tr></table></figure>

<h4 id="aler警告框"><a href="#aler警告框" class="headerlink" title="aler警告框"></a>aler警告框</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.select <span class="keyword">import</span> Select</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line">browser.implicitly_wait(<span class="number">20</span>)</span><br><span class="line"><span class="comment"># 访问url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.runoob.com/try/try.php?filename=tryjs_alert&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 点击运行按钮</span></span><br><span class="line">browser.switch_to.frame(<span class="string">&quot;iframeResult&quot;</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;[value=&quot;显示警告框&quot;]&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 切换到alert框内</span></span><br><span class="line">alert = browser.switch_to.alert  <span class="comment"># 返回alert对话框对象</span></span><br><span class="line"><span class="comment"># 获取文本</span></span><br><span class="line"><span class="built_in">print</span>(alert.text)</span><br><span class="line"><span class="comment"># 点击确定</span></span><br><span class="line">alert.accept()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/alert.png"></p>
<h4 id="confirm确认框"><a href="#confirm确认框" class="headerlink" title="confirm确认框"></a>confirm确认框</h4><h4 id="prompt提示框"><a href="#prompt提示框" class="headerlink" title="prompt提示框"></a>prompt提示框</h4><h2 id="元素操作"><a href="#元素操作" class="headerlink" title="元素操作"></a>元素操作</h2><p><code>.click()</code>单击输入</p>
<p><code>clear()</code>清楚文本</p>
<p><code>sendkeys()</code>模拟输入，如果要上传本地文件也使用这个</p>
<h3 id="获取元素信息的常用方法"><a href="#获取元素信息的常用方法" class="headerlink" title="获取元素信息的常用方法"></a>获取元素信息的常用方法</h3><p><code>size</code> 返回元素大小</p>
<p><code>text</code> 获取元素文本</p>
<p><code>get_attribute(&quot;xxx&quot;)</code> 获取属性值，传递到参数为元素的属性名</p>
<p><code>is_displayed()</code> 判断元素在页面上是否可见。</p>
<p><code>is_enabled()</code> 判断元素是否可用，即元素是否可以进行交互操作，比如点击、输入等</p>
<p><code>is_selected()</code> 判断元素是否选择，用来检查复选框或者单选按钮是否被选中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line"></span><br><span class="line">browser.get(<span class="string">&quot;https://www.bilibili.com/&quot;</span>)</span><br><span class="line"><span class="comment"># 获取元素大小</span></span><br><span class="line"><span class="built_in">print</span>(browser.find_element(By.CSS_SELECTOR,value=<span class="string">&#x27;.nav-search-content&#x27;</span>).size)</span><br><span class="line"><span class="comment"># 获取元素个数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(browser.find_elements(By.CSS_SELECTOR,value=<span class="string">&#x27;.channel-link&#x27;</span>)))</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">el1=browser.find_element(By.CSS_SELECTOR,value=<span class="string">&#x27;.nav-search-input&#x27;</span>)</span><br><span class="line">el1.send_keys(<span class="string">&#x27;python&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">browser.refresh()</span><br><span class="line">el=browser.find_elements(By.CSS_SELECTOR,value=<span class="string">&#x27;.channel-link&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(el.text)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 打印a元素的href属性</span></span><br><span class="line"><span class="built_in">print</span>(el.get_attribute(<span class="string">&#x27;href&#x27;</span>))</span><br><span class="line">el.click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 判断元素是否可见</span></span><br><span class="line">el2=browser.find_elements(By.CLASS_NAME,value=<span class="string">&#x27;channel-link&#x27;</span>)[<span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(el2.is_displayed())</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 元素可见，点击</span></span><br><span class="line"><span class="keyword">if</span> el2.is_displayed():</span><br><span class="line">    el2.click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 判断元素是否可用</span></span><br><span class="line">el3=browser.find_elements(By.CLASS_NAME,value=<span class="string">&#x27;channel-link&#x27;</span>)[<span class="number">4</span>]</span><br><span class="line"><span class="built_in">print</span>(el3.is_enabled())</span><br><span class="line"><span class="keyword">if</span> el3.is_enabled():</span><br><span class="line">    el3.click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 关闭主窗口</span></span><br><span class="line">browser.close()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240418151805030.png"></p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/elein2.png"></p>
<h2 id="浏览器常用操作"><a href="#浏览器常用操作" class="headerlink" title="浏览器常用操作"></a>浏览器常用操作</h2><p><code>maximize_window()</code>最大化浏览器窗口</p>
<p><code>set_window_size(width,height)</code>设置浏览器窗口大小</p>
<p><code>set_window_position</code>设置浏览器窗口位置</p>
<p><code>back()</code>模拟浏览器后退</p>
<p><code>forward()</code>前进</p>
<p><code>refresh()</code>刷新，在cookie中使用到</p>
<p><code>close()</code>关闭当前窗口</p>
<p><code>quit()</code>关闭浏览器驱动对象（会关闭所有窗口）</p>
<p><code>title</code>获取页面title</p>
<p><code>current_url</code>获取当前页面url</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实现前进后退</span></span><br><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"><span class="comment"># 设置窗口位置</span></span><br><span class="line">browser.set_window_position(<span class="number">320</span>,<span class="number">150</span>)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">browser.get(<span class="string">&quot;https://www.bilibili.com/&quot;</span>)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 执行后退</span></span><br><span class="line">browser.back()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 执行前进</span></span><br><span class="line">browser.forward()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p>关闭的窗口是创建的主窗口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line"></span><br><span class="line">browser.get(<span class="string">&quot;https://www.bilibili.com/&quot;</span>)</span><br><span class="line"><span class="comment"># print(browser.find_element(By.CSS_SELECTOR,value=&#x27;nav-search-content&#x27;).size)</span></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">el1=browser.find_element(By.CSS_SELECTOR,value=<span class="string">&#x27;.nav-search-input&#x27;</span>)</span><br><span class="line">el1.send_keys(<span class="string">&#x27;python&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">browser.refresh()</span><br><span class="line">el=browser.find_elements(By.CLASS_NAME,value=<span class="string">&#x27;channel-link&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">el.click()</span><br><span class="line"><span class="built_in">print</span>(browser.current_url)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.find_elements(By.CLASS_NAME,value=<span class="string">&#x27;channel-link&#x27;</span>)[<span class="number">3</span>].click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">browser.find_elements(By.CLASS_NAME,value=<span class="string">&#x27;channel-link&#x27;</span>)[<span class="number">4</span>].click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 关闭主窗口</span></span><br><span class="line">browser.close()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/API1.png"></p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/API2.png"></p>
<h1 id="鼠标和键盘操作"><a href="#鼠标和键盘操作" class="headerlink" title="鼠标和键盘操作"></a>鼠标和键盘操作</h1><h2 id="鼠标操作"><a href="#鼠标操作" class="headerlink" title="鼠标操作"></a>鼠标操作</h2><p><code>click()</code>是元素的事件，不是鼠标的事件。在selenium中操作鼠标的方法封装在ActionChains类中</p>
<p>实例化对象：<code>action=ActionChains(driver)</code></p>
<p>方法：</p>
<p><code>context_click(element)</code> 右击</p>
<p><code>double_click(element)</code>双击</p>
<p><code>drag_and_drop(source,target)</code> 拖动</p>
<p><code>move_to_element</code>悬停</p>
<p><code>perform()</code>执行以上所有鼠标操作，所有的方法都需要执行才生效</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">browser=webdriver.Chrome()</span><br><span class="line">action=ActionChains(browser)</span><br><span class="line">browser.get(<span class="string">&#x27;https://www.bilibili.com&#x27;</span>)</span><br><span class="line">el1 = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;.nav-search-input&#x27;</span>)</span><br><span class="line"><span class="comment"># 右击鼠标</span></span><br><span class="line">action.context_click(el1).perform()</span><br><span class="line">el1.send_keys(<span class="string">&#x27;python&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 双击</span></span><br><span class="line">action.double_click(el1).perform()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">browser.refresh()</span><br><span class="line">el2 = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;.download-client-trigger__icon&#x27;</span>)</span><br><span class="line"><span class="comment"># 悬停</span></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">action.move_to_element(el2).perform()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p>拖拽：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line">action = ActionChains(browser)</span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">el1 = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;.title-content-title&#x27;</span>)</span><br><span class="line">el2=browser.find_element(By.CSS_SELECTOR,value=<span class="string">&#x27;#kw&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 将元素el1拖至el2</span></span><br><span class="line">action.drag_and_drop(el1,el2).perform()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR,value=<span class="string">&#x27;#su&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.quit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/dragdrop.png"></p>
<p><code>drag_and_drop_by_offset(source,xoffset,yoffset)</code>通过坐标偏移量执行拖拽</p>
<p>实例化匿名：<code>ActionChains(driver).double_click(element).perform()</code></p>
<p>实名：<code>action=ActionChains(driver)</code></p>
<h2 id="键盘操作"><a href="#键盘操作" class="headerlink" title="键盘操作"></a>键盘操作</h2><p>常用的键盘操作：</p>
<p><code>send_keys(Keys.BACK_SPACE)</code>  删除键</p>
<p><code>send_keys(Keys.SPACE)</code>  空格键</p>
<p><code>send_keys(Keys.TAB)</code>  制表键</p>
<p><code>send_keys(keys.ESCAPE)</code> 回退键</p>
<p><code>send_keys(keys.ENTER)</code>  回车键</p>
<p><code>send_keys(keys.CONTROL,&#39;a&#39;)</code> ctrl+a</p>
<p><code>send_keys(keys.CONTROL,&#39;c&#39;)</code> ctrl+c</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains, Keys</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line">action = ActionChains(browser)</span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">el1 = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#kw&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">el1.send_keys(<span class="string">&#x27;Python1&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">el1.send_keys(Keys.BACK_SPACE)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">el1.send_keys(Keys.CONTROL, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">el1.send_keys(Keys.CONTROL, <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 粘贴</span></span><br><span class="line">el1.send_keys(Keys.CONTROL, <span class="string">&#x27;v&#x27;</span>)</span><br><span class="line">el1.send_keys(Keys.CONTROL, <span class="string">&#x27;v&#x27;</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#su&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/keyboard.png"></p>
<h1 id="元素等待"><a href="#元素等待" class="headerlink" title="元素等待"></a>元素等待</h1><p>在定位页面元素如果未找到，会在指定时间内一直等待的过程。在设置的时长内加载出来，会执行代码；没有加载出来则抛出异常</p>
<p>为什么要设置元素等待？网络速度慢、电脑配置低、服务器处理请求慢</p>
<h2 id="隐式等待"><a href="#隐式等待" class="headerlink" title="隐式等待"></a>隐式等待</h2><p>隐式等待为<strong>全局设置</strong>，设置一次，作用于所有元素。一般为前置必写代码</p>
<p>定位元素时，如果能定位到元素则直接返回该元素，不触发等待；如果不能定位到该元素，则间隔一段时间后再去定位元素；如果在达到最大时长时还没有找到指定元素，则抛出元素不存在的异常<code>NoSuchElementException</code></p>
<p>方法：<code>driver.implicitly_wait(timeout)</code>,timeout为等待最大时长，单位秒。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line"><span class="comment"># 设置隐式等待10s</span></span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 正确id为kw</span></span><br><span class="line">el1 = browser.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#kj&#x27;</span>)</span><br><span class="line">el1.send_keys(<span class="string">&#x27;python&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/ime.png"></p>
<h2 id="显式等待"><a href="#显式等待" class="headerlink" title="显式等待"></a>显式等待</h2><p><strong>对单个的元素有效</strong></p>
<p>定位元素时，如果能定位到元素则直接返回该元素，不触发等待；如果不能定位到该元素，则间隔一段时间后再去定位元素；如果在达到最大时长时还没有找到指定元素，则抛出超时异常<code>TimeoutException</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 导包</span><br><span class="line"><span class="number">2.</span> webDriverWait(driver, timeout, poll_frequency=<span class="number">0.5</span>)</span><br><span class="line"> <span class="number">1</span>) driver: 浏览器驱动对象</span><br><span class="line"> <span class="number">2</span>) timeout: 超时的时长单位秒</span><br><span class="line"> <span class="number">3</span>) poll_frequency: 检测间隔时间，默认<span class="number">0.5</span>s</span><br><span class="line"><span class="number">3.</span> 调用方法 until(method):直到...时</span><br><span class="line"> <span class="number">1</span>) method: 函数名称，该函数用来实现对元素的定位</span><br><span class="line"> <span class="number">2</span>) 一般使用匿名函数来实现：<span class="keyword">lambda</span> x: x.find_element(By.方法,value)</span><br><span class="line"><span class="number">4.</span> element = WebDriverWait(driver, <span class="number">10</span>, <span class="number">1</span>).util(<span class="keyword">lambda</span> x: x.find_element(By.,value))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 打开url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line"><span class="comment"># 设置显式等待10s</span></span><br><span class="line"><span class="comment"># 正确id为kw</span></span><br><span class="line">el = WebDriverWait(browser, <span class="number">10</span>, poll_frequency=<span class="number">0.5</span>).until(<span class="keyword">lambda</span> x: x.find_element(By.CSS_SELECTOR, value=<span class="string">&#x27;#kj&#x27;</span>))</span><br><span class="line"><span class="comment"># 此时el还不是元素，代码运行起来才是</span></span><br><span class="line">el.send_keys(<span class="string">&#x27;python&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/timeout.png"></p>
<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><ul>
<li>显示等待针对单个元素生效，隐式等待针对全局元素生效</li>
</ul>
<h1 id="滚动条操作"><a href="#滚动条操作" class="headerlink" title="滚动条操作"></a>滚动条操作</h1><p>html页面元素为动态显示，元素根据滚动条的下拉而加载。</p>
<p>Selenium没有提供操作滚动条的方法，但是提供了可执行JS脚本的方法，我们通过JS脚本来达到操作滚动条的目的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 设置JS脚本控制滚动条</span><br><span class="line">	js = &quot;window.scrollTo(0,1000)&quot;</span><br><span class="line">	(0:左边距;1000:上边距 单位:像素)</span><br><span class="line">2. selenium调用JS脚本的方法</span><br><span class="line">	driver.execute_scrip(js)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.select <span class="keyword">import</span> Select</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://rinta.top&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 设置js控制语句</span></span><br><span class="line">js = <span class="string">&quot;window.scrollTo(0,10000)&quot;</span></span><br><span class="line"><span class="comment"># 滚动条下拉</span></span><br><span class="line">browser.execute_script(js)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/scroll.png"></p>
<h1 id="frame切换"><a href="#frame切换" class="headerlink" title="frame切换"></a>frame切换</h1><p>frame是html页面中的一种框架，主要作用是在当前页面的指定区域显示一页面元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">形式一：</span><br><span class="line"><span class="tag">&lt;<span class="name">frameset</span> <span class="attr">cols</span>=<span class="string">&quot;25%,75%&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">&quot;frame_a.htm&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">fram</span> <span class="attr">src</span>=<span class="string">&quot;frame_.htm&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">fram</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line">形式二：</span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">name</span>=<span class="string">&quot;iframe_a&quot;</span> <span class="attr">src</span>=<span class="string">&quot;demo_iframe.htm&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span>,<span class="attr">height</span>=<span class="string">&quot;200&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="frame切换方法"><a href="#frame切换方法" class="headerlink" title="frame切换方法"></a>frame切换方法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 切换到指定frame的方法，frame_reference可以为frame框架的name、<span class="built_in">id</span>或者定位到的frame元素</span><br><span class="line">driver.switch_to.frame(frame_reference)   </span><br><span class="line"><span class="number">2.</span> 恢复默认页面,在frame中操作其他页面一定要切换到默认页面</span><br><span class="line">driver.switch_to.default_content()</span><br></pre></td></tr></table></figure>

<h1 id="窗口切换"><a href="#窗口切换" class="headerlink" title="窗口切换"></a>窗口切换</h1><p>Selenium的默认焦点是在主窗口。在selenium中封装了获取当前窗口的句柄、获取所有窗口句柄和切换到指定句柄窗口的方法</p>
<p><strong>句柄：handle</strong>，窗口的唯一识别码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取当前窗口句柄</span></span><br><span class="line">driver.current_window_handle  </span><br><span class="line"><span class="comment"># 获取所有窗口句柄</span></span><br><span class="line">driver.window_handles</span><br><span class="line"><span class="comment"># 切换指定句柄窗口</span></span><br><span class="line">driver.switch_to.window(handle)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 输入内容并查询</span></span><br><span class="line">browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#kw&#x27;</span>).send_keys(<span class="string">&#x27;小润&#x27;</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#su&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">ch = browser.current_window_handle</span><br><span class="line"><span class="built_in">print</span>(ch)</span><br><span class="line"><span class="comment"># 点击词条</span></span><br><span class="line">browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;._around-mask_bo7t2_14&#x27;</span>).click()</span><br><span class="line"><span class="comment"># 获取所有窗口句柄</span></span><br><span class="line">handles = browser.window_handles</span><br><span class="line"><span class="built_in">print</span>(handles)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> handle <span class="keyword">in</span> handles:</span><br><span class="line">    <span class="comment"># 切换窗口,虽然看到的页面是新打开的小润页面，但是元素定位仍在主窗口</span></span><br><span class="line">    <span class="keyword">if</span> handle != ch:</span><br><span class="line">        browser.switch_to.window(handle)</span><br><span class="line">        browser.find_elements(By.CSS_SELECTOR, <span class="string">&#x27;.text_BqlxX&#x27;</span>)[<span class="number">2</span>].click()</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/handle.png"></p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/handles.png"></p>
<h1 id="窗口截图与验证码"><a href="#窗口截图与验证码" class="headerlink" title="窗口截图与验证码"></a>窗口截图与验证码</h1><h2 id="窗口截图"><a href="#窗口截图" class="headerlink" title="窗口截图"></a>窗口截图</h2><p>在执行出错的时候对当前窗口截图保存，可以通过图片直观地看到出错的原因</p>
<p><code>driver.get_screenshot_as_file(imgpath)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 输入内容并查询</span></span><br><span class="line">browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#kw&#x27;</span>).send_keys(<span class="string">&#x27;小润&#x27;</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#su&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 截图</span></span><br><span class="line">browser.get_screenshot_as_file(<span class="string">&#x27;./screenshot.png&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/screenshot.png"></p>
<p>根据时间戳获取截图：</p>
<p><code>browser.get_screenshot_as_file(&#39;./&#123;&#125;.png&#39;.format(time.strftime(&quot;%Y_%m_%d_%H_%M_%S&quot;)))</code></p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/Web%E8%87%AA%E5%8A%A8%E5%8C%96%5Csh.png" alt="image-20240315160631218"></p>
<h2 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h2><p>selenium中没有对验证码处理的方式</p>
<ol>
<li>去掉验证码（测试环境下采用）</li>
<li>设置万能验证码（生产环境和测试环境下采用）</li>
<li>验证码识别技术（通过Python-tesseract来识别图片类型验证码，识别率很难达到100%）</li>
<li>记录cookie（通过cookie进行跳过登录）</li>
</ol>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/cookie.png"></p>
<p>cookie是由web服务器生成的，并且保存至用户浏览器上的小型文本文件，可以包含用户相关信息。</p>
<p>cookie数据格式：键值对组成（python中的字典）</p>
<p>cookie产生：客户端请求服务器。如果服务器需要记录该用户状态，就向客户端颁发一个cookie数据</p>
<p>cookie使用：当浏览器再次请求该网站时，浏览器把请求的数据和cookie数据一同提交给服务器检查该cookie，以此来辨认用户状态</p>
<p>Cookie通常用于以下几个方面：</p>
<ol>
<li>会话管理：用于跟踪用户的会话信息，例如在用户登录后保持用户的登录状态。</li>
<li>用户跟踪：用于记录用户的行为和偏好，以便网站提供个性化的体验。</li>
<li>高级功能：用于实现购物车、记住密码、广告定位等功能。</li>
<li>安全性：可以用于防止跨站点请求伪造（CSRF）等安全问题。</li>
</ol>
<h3 id="selenium操作cookie"><a href="#selenium操作cookie" class="headerlink" title="selenium操作cookie"></a>selenium操作cookie</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 获取指定cookie，name为cookie的名称。底层是get_cookies()</span></span><br><span class="line">get_cookie(name)</span><br><span class="line"><span class="comment"># 2. 获取本网站所有本地cookies</span></span><br><span class="line">get_cookies()</span><br><span class="line"><span class="comment"># 3. 添加coockie。cookie_dict:一个字典对象，必选的键包括&#x27;name&#x27; and &#x27;value&#x27;</span></span><br><span class="line">add_cookie(cookie_dict)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 添加cookie，以登录状态进入</span></span><br><span class="line">browser.add_cookie(&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;BDUSS&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;value&quot;</span>: <span class="string">&quot;JwZG4zOUpyQU1RbXI2Z0VmbXVlU0ZuWmY0MUotcVZqcER-N3RqV0l-WUZveHRtSVFBQUFBJCQAAAAAAAAAAAEAAABZR~-XUmlubnQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUW9GUFFvRlSF&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.refresh()</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/cookies.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取浏览器对象</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">browser.maximize_window()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问url</span></span><br><span class="line">browser.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 添加cookie</span></span><br><span class="line">browser.add_cookie(&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;BDUSS&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;value&quot;</span>: <span class="string">&quot;JwZG4zOUpyQU1RbXI2Z0VmbXVlU0ZuWmY0MUotcVZqcER-N3RqV0l-WUZveHRtSVFBQUFBJCQAAAAAAAAAAAEAAABZR~-XUmlubnQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUW9GUFFvRlSF&quot;</span>&#125;)</span><br><span class="line"><span class="comment"># 获取所有的cookies信息</span></span><br><span class="line">cookies=browser.get_cookies()</span><br><span class="line"><span class="keyword">for</span> co <span class="keyword">in</span> cookies:</span><br><span class="line">    <span class="built_in">print</span>(co)</span><br><span class="line"><span class="comment"># 获取单个cookie</span></span><br><span class="line">cookie=browser.get_cookie(<span class="string">&quot;name&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(cookie)</span><br><span class="line"><span class="built_in">print</span>(browser.get_cookie(<span class="string">&#x27;BDUSS&#x27;</span>))</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.refresh()</span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/baiducoo.png"></p>
<h1 id="登录测试案例"><a href="#登录测试案例" class="headerlink" title="登录测试案例"></a>登录测试案例</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义测试类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestJDShop</span>(unittest.TestCase):</span><br><span class="line">    <span class="comment"># 定义初始化方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        url = <span class="string">&#x27;https://passport.jd.com/new/login.aspx?ReturnUrl=https%3A%2F%2Fwww.jd.com%2F%3Fcu%3Dtrue%26utm_source%3Dbaidu-pinzhuan%26utm_medium%3Dcpc%26utm_campaign%3Dt_288551095_baidupinzhuan%26utm_term%3D0f3d30c8dba7459bb52f2eb5eba8ac7d_0_40173755626041979e00a100eec87380&#x27;</span></span><br><span class="line"></span><br><span class="line">        self.driver = webdriver.Chrome()</span><br><span class="line">        self.driver.maximize_window()</span><br><span class="line">        self.driver.get(url)</span><br><span class="line">        self.driver.implicitly_wait(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 定义teardown</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDown</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 关闭浏览器对象</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        self.driver.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_code_null</span>(<span class="params">self</span>):</span><br><span class="line">        driver = self.driver</span><br><span class="line">        <span class="comment"># 切换至短信登录</span></span><br><span class="line">        driver.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#sms-login&#x27;</span>).click()</span><br><span class="line">        <span class="comment"># 输入账号</span></span><br><span class="line">        el1 = driver.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#mobile-number&#x27;</span>)</span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        el1.send_keys(<span class="string">&#x27;12345678901&#x27;</span>)</span><br><span class="line">        <span class="comment"># 点击发送验证码</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        el2 = driver.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#send-sms-code-btn&#x27;</span>)</span><br><span class="line">        el2.click()</span><br><span class="line">        <span class="comment"># 输入验证码</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        el3 = driver.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#sms-code&#x27;</span>)</span><br><span class="line">        el3.send_keys(<span class="string">&#x27;324678&#x27;</span>)</span><br><span class="line">        <span class="comment"># 点击登录</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        driver.find_element(By.CSS_SELECTOR, <span class="string">&#x27;#sms-login-submit&#x27;</span>).click()</span><br><span class="line">        <span class="comment"># 获取错误提示信息</span></span><br><span class="line">        text = driver.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.sms-box-error-msg&#x27;</span>).text</span><br><span class="line">        expect_text = <span class="string">&#x27;验证码为空&#x27;</span></span><br><span class="line">        <span class="built_in">print</span>(text)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.assertEqual(text, expect_text)</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            driver.get_screenshot_as_file(<span class="string">&#x27;./&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(time.strftime(<span class="string">&quot;%Y_%m_%d_%H_%M_%S&quot;</span>)))</span><br><span class="line">            <span class="comment"># 抛异常，有异常捕获不抛出会显示test pass</span></span><br><span class="line">            <span class="keyword">raise</span></span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/jdlogin.png"></p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/jdcode.png"></p>
<h1 id="PO模式"><a href="#PO模式" class="headerlink" title="PO模式"></a>PO模式</h1><p>PO：page（页面），objecr（对象）</p>
<p>v1：不采用任何模型（线性模型）</p>
<p>v2：采用unittest框架</p>
<p>v3：业务代码和页面对象进行分离</p>
<p>v4：实际中的PO模式编写</p>
<h2 id="v1"><a href="#v1" class="headerlink" title="v1"></a>v1</h2><p>不能实现批量执行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 淘宝界面，用不了</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试之前的前置工作</span></span><br><span class="line"><span class="comment"># 实例化对象</span></span><br><span class="line">browser=webdriver.Chrome()</span><br><span class="line"><span class="comment"># 窗口最大化</span></span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 获取url</span></span><br><span class="line">browser.get(<span class="string">&#x27;https://login.taobao.com/member/login.jhtml?spm=a21bo.jianhua.754894437.1.5af92a89NKrwFE&amp;f=top&amp;redirectURL=https%3A%2F%2Fwww.taobao.com%2F&#x27;</span>)</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换至短信登录</span></span><br><span class="line"><span class="comment"># 点击切换按钮</span></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line">browser.find_element(By.XPATH,<span class="string">&#x27;//*[@id=&quot;login&quot;]/div[2]/div/div[2]/a[1]&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 输入错误的username</span></span><br><span class="line">el1=browser.find_element(By.CSS_SELECTOR,<span class="string">&#x27;#fm-login-id&#x27;</span>)</span><br><span class="line">el1.send_keys(<span class="string">&#x27;15234567888&#x27;</span>)</span><br><span class="line"><span class="comment"># 输入正确的密码</span></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">el2=browser.find_element(By.CSS_SELECTOR,<span class="string">&#x27;#fm-login-password&#x27;</span>)</span><br><span class="line">el2.send_keys(<span class="string">&#x27;Rinta1343&#x27;</span>)</span><br><span class="line"><span class="comment"># 点击登录</span></span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR,<span class="string">&#x27;.class=&quot;fm-button fm-submit password-login&#x27;</span>).click()</span><br><span class="line"><span class="comment"># 获取错误提示信息</span></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">msg=browser.find_element(By.CSS_SELECTOR,<span class="string">&#x27;.login-error-msg&#x27;</span>)</span><br><span class="line"><span class="keyword">assert</span> msg == <span class="string">&#x27;账号名或登录密码不正确&#x27;</span></span><br><span class="line"><span class="comment"># 结束工作，关闭对象</span></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p>验证密码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common <span class="keyword">import</span> NoSuchElementException</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试之前的前置工作</span></span><br><span class="line"><span class="comment"># 实例化对象</span></span><br><span class="line">browser=webdriver.Chrome()</span><br><span class="line"><span class="comment"># 窗口最大化</span></span><br><span class="line">browser.maximize_window()</span><br><span class="line"><span class="comment"># 获取url</span></span><br><span class="line">browser.get(<span class="string">&#x27;http://demo5.tp-shop.cn/&#x27;</span>)</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 跳转到登录页面</span></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 输入错误的username</span></span><br><span class="line">browser.find_element(By.LINK_TEXT,<span class="string">&#x27;登录&#x27;</span>).click()</span><br><span class="line">el1=browser.find_element(By.CSS_SELECTOR,<span class="string">&#x27;#username&#x27;</span>)</span><br><span class="line">el1.send_keys(<span class="string">&#x27;13800138006&#x27;</span>)</span><br><span class="line"><span class="comment"># 输入错误的密码</span></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">el2=browser.find_element(By.CSS_SELECTOR,<span class="string">&#x27;#password&#x27;</span>)</span><br><span class="line">el2.send_keys(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="comment"># 点击登录</span></span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line">browser.find_element(By.CSS_SELECTOR,<span class="string">&#x27;.J-login-submit&#x27;</span>).click()</span><br><span class="line"><span class="comment"># 如果有消息链接，则登录成功，截图</span></span><br><span class="line"><span class="comment"># el3=browser.find_element(By.CSS_SELECTOR,&#x27;.J-umsg&#x27;)</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 尝试定位元素</span></span><br><span class="line">    el3=browser.find_element(By.CSS_SELECTOR,<span class="string">&#x27;.J-umsg&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">    browser.get_screenshot_as_file(<span class="string">&#x27;./success.png&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> NoSuchElementException:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;登录失败&#x27;</span>)</span><br><span class="line">    browser.get_screenshot_as_file(<span class="string">&#x27;./fail.png&#x27;</span>)</span><br><span class="line"><span class="comment"># 结束工作，关闭对象</span></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">browser.quit()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240418194248930.png"></p>
<p>换成正确密码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el2.send_keys(<span class="string">&#x27;soubao0316&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240418194530691.png"></p>
<p>缺点：数据和代码操作融合在一起，单线操作</p>
<h2 id="v2"><a href="#v2" class="headerlink" title="v2"></a>v2</h2><p>可以批量运行，代码冗余量大。没有实现页面对象与业务脚本的分离</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建测试类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestLogin</span>(unittest.TestCase):</span><br><span class="line">    browser = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 测试之前的前置工作</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUpClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 实例化对象</span></span><br><span class="line">        cls.browser = webdriver.Chrome()</span><br><span class="line">        <span class="comment"># 窗口最大化</span></span><br><span class="line">        cls.browser.maximize_window()</span><br><span class="line">        <span class="comment"># 获取url</span></span><br><span class="line">        cls.browser.get(<span class="string">&#x27;http://localhost/iwebshopmaster/&#x27;</span>)</span><br><span class="line">        cls.browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDownClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 结束工作，关闭对象</span></span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br><span class="line">        cls.browser.quit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_login_username_not_exist</span>(<span class="params">self</span>):</span><br><span class="line">        browser = self.browser</span><br><span class="line">        <span class="comment"># 切换至登录界面</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        browser.find_element(By.LINK_TEXT, <span class="string">&#x27;登录&#x27;</span>).click()</span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        <span class="comment"># 输入错误的username</span></span><br><span class="line">        el1 = browser.find_element(By.NAME, <span class="string">&#x27;login_info&#x27;</span>)</span><br><span class="line">        el1.clear()</span><br><span class="line">        el1.send_keys(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line">        <span class="comment"># 输入正确的密码</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        el2 = browser.find_element(By.NAME, <span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        el2.clear()</span><br><span class="line">        el2.send_keys(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line">        <span class="comment"># 点击登录</span></span><br><span class="line">        time.sleep(<span class="number">10</span>)</span><br><span class="line">        browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.submit_login&#x27;</span>).click()</span><br><span class="line">        <span class="comment"># 获取错误提示信息</span></span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        msg = browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.prompt&#x27;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 错误的断言import time</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建测试类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestLogin</span>(unittest.TestCase):</span><br><span class="line">    browser = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 测试之前的前置工作</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUpClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 实例化对象</span></span><br><span class="line">        cls.browser = webdriver.Chrome()</span><br><span class="line">        <span class="comment"># 窗口最大化</span></span><br><span class="line">        cls.browser.maximize_window()</span><br><span class="line">        <span class="comment"># 获取url</span></span><br><span class="line">        cls.browser.get(<span class="string">&#x27;http://localhost/iwebshopmaster/&#x27;</span>)</span><br><span class="line">        cls.browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDownClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 结束工作，关闭对象</span></span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br><span class="line">        cls.browser.quit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_login_username_not_exist</span>(<span class="params">self</span>):</span><br><span class="line">        browser = self.browser</span><br><span class="line">        <span class="comment"># 切换至登录界面</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        browser.find_element(By.LINK_TEXT, <span class="string">&#x27;登录&#x27;</span>).click()</span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        <span class="comment"># 输入错误的username</span></span><br><span class="line">        el1 = browser.find_element(By.NAME, <span class="string">&#x27;login_info&#x27;</span>)</span><br><span class="line">        el1.clear()</span><br><span class="line">        el1.send_keys(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line">        <span class="comment"># 输入正确的密码</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        el2 = browser.find_element(By.NAME, <span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        el2.clear()</span><br><span class="line">        el2.send_keys(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line">        <span class="comment"># 点击登录</span></span><br><span class="line">        time.sleep(<span class="number">10</span>)</span><br><span class="line">        browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.submit_login&#x27;</span>).click()</span><br><span class="line">        <span class="comment"># 获取错误提示信息</span></span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        msg = browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.prompt&#x27;</span>).text</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.assertEqual(msg, <span class="string">&#x27;账号名或登录密码不正确&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            browser.get_screenshot_as_file(<span class="string">&#x27;./failusername.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_login_password_err</span>(<span class="params">self</span>):</span><br><span class="line">        browser = self.browser</span><br><span class="line">        <span class="comment"># 切换至短信登录</span></span><br><span class="line">        <span class="comment"># 点击切换按钮</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        browser.find_element(By.LINK_TEXT, <span class="string">&#x27;登录&#x27;</span>).click()</span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        <span class="comment"># 输入正确的username</span></span><br><span class="line">        el1 = browser.find_element(By.NAME, <span class="string">&#x27;login_info&#x27;</span>)</span><br><span class="line">        el1.clear()</span><br><span class="line">        el1.send_keys(<span class="string">&#x27;ab&#x27;</span>)</span><br><span class="line">        <span class="comment"># 输入错误的密码</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        el2 = browser.find_element(By.NAME, <span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        el2.clear()</span><br><span class="line">        el2.send_keys(<span class="string">&#x27;1234567&#x27;</span>)</span><br><span class="line">        <span class="comment"># 点击登录</span></span><br><span class="line">        time.sleep(<span class="number">10</span>)</span><br><span class="line">        browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.submit_login&#x27;</span>).click()</span><br><span class="line">        <span class="comment"># 获取错误提示信息</span></span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        msg = browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.prompt&#x27;</span>).text</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.assertEqual(msg, <span class="string">&#x27;账号或密码错误&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            browser.get_screenshot_as_file(<span class="string">&#x27;../reports/failpassword.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            self.assertEqual(msg, <span class="string">&#x27;账号名或登录密码不正确&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            browser.get_screenshot_as_file(<span class="string">&#x27;./failusername.png&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_login_password_err</span>(<span class="params">self</span>):</span><br><span class="line">        browser = self.browser</span><br><span class="line">        <span class="comment"># 切换至短信登录</span></span><br><span class="line">        <span class="comment"># 点击切换按钮</span></span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        browser.find_element(By.LINK_TEXT, <span class="string">&#x27;登录&#x27;</span>).click()</span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        <span class="comment"># 输入正确的username</span></span><br><span class="line">        el1 = browser.find_element(By.NAME, <span class="string">&#x27;login_info&#x27;</span>)</span><br><span class="line">        el1.clear()</span><br><span class="line">        el1.send_keys(<span class="string">&#x27;ab&#x27;</span>)</span><br><span class="line">        <span class="comment"># 输入错误的密码</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        el2 = browser.find_element(By.NAME, <span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        el2.clear()</span><br><span class="line">        el2.send_keys(<span class="string">&#x27;1234567&#x27;</span>)</span><br><span class="line">        <span class="comment"># 点击登录</span></span><br><span class="line">        time.sleep(<span class="number">10</span>)</span><br><span class="line">        browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.submit_login&#x27;</span>).click()</span><br><span class="line">        <span class="comment"># 获取错误提示信息</span></span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        msg = browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.prompt&#x27;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 正确的断言</span></span><br><span class="line">            self.assertEqual(msg, <span class="string">&#x27;账号或密码错误&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            browser.get_screenshot_as_file(<span class="string">&#x27;../reports/failpassword.png&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240418202223298.png"></p>
<h2 id="v3"><a href="#v3" class="headerlink" title="v3"></a>v3</h2><p>页面层以page开头，业务层以test开头</p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/v3file.png"></p>
<p>页面层级清晰，但是代码冗余量大</p>
<p>页面层代码page_login.py:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">页面对象层</span></span><br><span class="line"><span class="string">    页面对象编写技巧：</span></span><br><span class="line"><span class="string">        类名：使用大驼峰将模块名称抄进来，有下划线去掉下划线</span></span><br><span class="line"><span class="string">        方法：根据业务需求每个操作步骤单独封装一个方法</span></span><br><span class="line"><span class="string">            方法名：page_XXX</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PageLogin</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 获取driver对象</span></span><br><span class="line">        self.driver = webdriver.Chrome()</span><br><span class="line">        <span class="comment"># 最大化浏览器</span></span><br><span class="line">        self.driver.maximize_window()</span><br><span class="line">        <span class="comment"># 隐式等待</span></span><br><span class="line">        self.driver.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">        <span class="comment"># 打开url</span></span><br><span class="line">        self.driver.get(<span class="string">&#x27;http://localhost/iwebshopmaster/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 点击登录链接</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_click_login</span>(<span class="params">self</span>):</span><br><span class="line">        self.driver.find_element(By.LINK_TEXT, <span class="string">&#x27;登录&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输入用户名</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_input_username</span>(<span class="params">self, username</span>):</span><br><span class="line">        self.driver.find_element(By.NAME, <span class="string">&#x27;login_info&#x27;</span>).send_keys(username)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输入密码</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_input_pwd</span>(<span class="params">self, pwd</span>):</span><br><span class="line">        self.driver.find_element(By.NAME, <span class="string">&#x27;password&#x27;</span>).send_keys(pwd)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 点击登录</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_click_login_btn</span>(<span class="params">self</span>):</span><br><span class="line">        self.driver.find_element(By.CLASS_NAME, <span class="string">&#x27;submit_login&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取异常提示</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_get_text</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.driver.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.prompt&#x27;</span>).text</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 组装登录业务方法给业务层调用</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_login</span>(<span class="params">self, username, pwd</span>):</span><br><span class="line">        <span class="comment"># 切换至登录界面</span></span><br><span class="line">        self.page_click_login()</span><br><span class="line">        <span class="comment"># 输入用户名</span></span><br><span class="line">        self.page_input_username(username)</span><br><span class="line">        <span class="comment"># 输入密码</span></span><br><span class="line">        self.page_input_pwd(pwd)</span><br><span class="line">        <span class="comment"># 点击登录</span></span><br><span class="line">        self.page_click_login_btn()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>业务层代码test_login：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> parameterized <span class="keyword">import</span> parameterized</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> po.v3.page.page_login <span class="keyword">import</span> PageLogin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建测试类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestLogin</span>(unittest.TestCase):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 初始化方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 创建page对象</span></span><br><span class="line">        self.login = PageLogin()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 结束方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDown</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 关闭驱动对象</span></span><br><span class="line">        self.login.driver.quit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 新建测试方法</span></span><br><span class="line">    <span class="comment"># 参数化</span></span><br><span class="line"><span class="meta">    @parameterized.expand(<span class="params">[(<span class="params"><span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;账号不存在&#x27;</span></span>), (<span class="params"><span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;123123&#x27;</span>, <span class="string">&#x27;密码错误&#x27;</span></span>)]</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_login</span>(<span class="params">self, username, pwd, expect</span>):</span><br><span class="line">        <span class="comment"># 调用测试登录方法</span></span><br><span class="line">        self.login.page_login(username, pwd)</span><br><span class="line">        <span class="comment"># 获取登录信息</span></span><br><span class="line">        msg = self.login.page_get_text()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 断言</span></span><br><span class="line">            self.assertEqual(msg, expect)</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            self.login.driver.get_screenshot_as_file(<span class="string">&#x27;./&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(time.strftime(<span class="string">&quot;%Y_%m_%d_%H_%M_%S&quot;</span>)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240418214755618.png"></p>
<h2 id="v4"><a href="#v4" class="headerlink" title="v4"></a>v4</h2><p>抽取v3版本的page页面公共方法—&gt;base（基类&#x2F;工具层）</p>
<p>page（页面对象）：一个页面封装成一个对象，继承base</p>
<p>scripts（业务层）：导包调用page页面</p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/v4.png"></p>
<p>base&#x2F;base.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.service <span class="keyword">import</span> Service</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    chrome_testing_path=<span class="string">r&quot;D:\chrometest\chrome-win64\chrome.exe&quot;</span></span><br><span class="line">    chromedriver_path=<span class="string">r&quot;D:\chrometest\chrome-win64\chromedriver.exe&quot;</span></span><br><span class="line">    options = webdriver.ChromeOptions()</span><br><span class="line">    options.binary_location = chrome_testing_path</span><br><span class="line">    options.add_experimental_option(<span class="string">&#x27;detach&#x27;</span>, <span class="literal">True</span>)</span><br><span class="line">    service=Service(chromedriver_path)</span><br><span class="line">    <span class="comment"># 初始化</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.driver = webdriver.Chrome(service=self.service,options=self.options)</span><br><span class="line">        self.driver.maximize_window()</span><br><span class="line">        self.driver.get(</span><br><span class="line">            <span class="string">&#x27;http://localhost/iwebshopmaster&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查找元素方法（提供：点击、输入、获取文本)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_find_element</span>(<span class="params">self, loc, timeout=<span class="number">30</span>, poll_frequency=<span class="number">0.5</span></span>):</span><br><span class="line">        <span class="comment"># 封装显示等待,会返回元素</span></span><br><span class="line">        <span class="keyword">return</span> WebDriverWait(self.driver, timeout=timeout, poll_frequency=poll_frequency).until(</span><br><span class="line">            <span class="keyword">lambda</span> x: x.find_element(*loc))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 点击方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_click</span>(<span class="params">self, loc</span>):</span><br><span class="line">        self.base_find_element(loc).click()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输入方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_input</span>(<span class="params">self, loc, value</span>):</span><br><span class="line">        el = self.base_find_element(loc)</span><br><span class="line">        <span class="comment"># 清空内容</span></span><br><span class="line">        el.clear()</span><br><span class="line">        <span class="comment"># 输入</span></span><br><span class="line">        el.send_keys(value)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取文本方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_get_text</span>(<span class="params">self, loc</span>):</span><br><span class="line">        <span class="keyword">return</span> self.base_find_element(loc).text</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 截图方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_get_img</span>(<span class="params">self</span>):</span><br><span class="line">        self.driver.get_screenshot_as_file(<span class="string">&quot;../img/&#123;&#125;.png&quot;</span>.<span class="built_in">format</span>(time.strftime(<span class="string">&quot;%Y_%m_%d_%H_%M_%S&quot;</span>)))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>page&#x2F;_<em>init</em>_.py：存放loc（查找元素的参数）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下为登录页面元素配置信息</span></span><br><span class="line"><span class="comment"># 登录链接</span></span><br><span class="line">login_link = By.LINK_TEXT, <span class="string">&quot;登录&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户名</span></span><br><span class="line">login_username = By.NAME, <span class="string">&quot;login_info&quot;</span></span><br><span class="line"><span class="comment"># 密码</span></span><br><span class="line">login_pwd = By.NAME, <span class="string">&quot;password&quot;</span></span><br><span class="line"><span class="comment"># 点击按钮</span></span><br><span class="line">login_btn = By.CSS_SELECTOR, <span class="string">&quot;.submit_login&quot;</span></span><br><span class="line"><span class="comment"># 提示信息</span></span><br><span class="line">login_msg = By.CSS_SELECTOR, <span class="string">&quot;.prompt&quot;</span></span><br></pre></td></tr></table></figure>

<p>page&#x2F;page_login.py：定义page类（继承自base）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> po.v4 <span class="keyword">import</span> page</span><br><span class="line"><span class="keyword">from</span> po.v4.base.base <span class="keyword">import</span> Base</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PageLogin</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="comment"># 点击登录链接</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_click_login_link</span>(<span class="params">self</span>):</span><br><span class="line">        self.base_click(page.login_link)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输入用户名</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_input_username</span>(<span class="params">self, username</span>):</span><br><span class="line">        self.base_input(page.login_username, username)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输入密码</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_input_pwd</span>(<span class="params">self, pwd</span>):</span><br><span class="line">        self.base_input(page.login_pwd, pwd)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 点击登录</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_click_login_btn</span>(<span class="params">self</span>):</span><br><span class="line">        self.base_click(page.login_btn)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取异常信息</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_get_text</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.base_get_text(page.login_msg)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 截图</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_get_screenshot</span>(<span class="params">self</span>):</span><br><span class="line">        self.base_get_img()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 组装页面的操作：输入用户名、密码、点击登录</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_login</span>(<span class="params">self, username, pwd</span>):</span><br><span class="line">        self.page_input_username(username)</span><br><span class="line">        self.page_input_pwd(pwd)</span><br><span class="line">        self.page_click_login_btn()</span><br></pre></td></tr></table></figure>

<p>scripts：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> parameterized <span class="keyword">import</span> parameterized</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> po.v4.page.page_login <span class="keyword">import</span> PageLogin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    <span class="keyword">return</span> [(<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;账号不存在&#x27;</span>), (<span class="string">&#x27;ab&#x27;</span>, <span class="string">&#x27;123123&#x27;</span>, <span class="string">&#x27;密码错误&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建测试类并继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestLogin</span>(unittest.TestCase):</span><br><span class="line">    login = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># setUP</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUpClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 实例化获取页面对象PageLogin</span></span><br><span class="line">        cls.login = PageLogin()</span><br><span class="line">        <span class="comment"># 点击登录</span></span><br><span class="line">        cls.login.page_click_login_link()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># tearDown</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDownClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 关闭驱动对象</span></span><br><span class="line">        cls.login.driver.quit()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @parameterized.expand(<span class="params">get_data(<span class="params"></span>)</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_login</span>(<span class="params">self, username, pwd, expect</span>):</span><br><span class="line">        <span class="comment"># 调用登录方法</span></span><br><span class="line">        self.login.page_login(username, pwd)</span><br><span class="line">        <span class="comment"># 获取登录提示信息</span></span><br><span class="line">        msg = self.login.page_get_text()</span><br><span class="line">        <span class="comment"># 断言</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.assertEqual(msg, expect)</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            <span class="comment"># 截图</span></span><br><span class="line">            self.login.page_get_screenshot()</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240418225436449.png"></p>
<h1 id="数据驱动"><a href="#数据驱动" class="headerlink" title="数据驱动"></a>数据驱动</h1><p>以数据来驱动整个测试用例的执行，也就是测试数据决定测试结果，可以将用户的关注点放在测试数据的构建和维护上，而不是直接维护脚本，可以利用同样的过程对不同的数据进行测试，实现要依赖参数化。</p>
<p>数据驱动常用的格式：json、xml、excel、csv、txt</p>
<p>json的底层是字符串，和字典有区别</p>
<h2 id="python字典和json之间的转换"><a href="#python字典和json之间的转换" class="headerlink" title="python字典和json之间的转换"></a>python字典和json之间的转换</h2><h3 id="python字典–-json字符串"><a href="#python字典–-json字符串" class="headerlink" title="python字典–&gt;json字符串"></a>python字典–&gt;json字符串</h3><p><code>dumps()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;address&#x27;</span>:<span class="string">&#x27;北京市海淀区&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;school&#x27;</span>:<span class="literal">None</span></span><br><span class="line">&#125;</span><br><span class="line">json_str=json.dumps(data) <span class="comment">#jump()是写</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;北京市海淀区&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;school&#x27;</span>: <span class="literal">None</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(data))</span><br><span class="line">json_str = json.dumps(data)</span><br><span class="line"><span class="built_in">print</span>(json_str)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(json_str))</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/tojson.png"></p>
<h3 id="json字符串–-dict"><a href="#json字符串–-dict" class="headerlink" title="json字符串–&gt;dict"></a>json字符串–&gt;dict</h3><p>键名必须在””中</p>
<p><code>loads()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">json_str = <span class="string">&#x27;&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;Tom&quot;,&quot;address&quot;:&quot;北京市海淀&quot;,&quot;school&quot;:null&#125;&#x27;</span></span><br><span class="line">dict_data=json.loads(json_str)<span class="comment"># loads()为读取json</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">json_str = <span class="string">&#x27;&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;Tom&quot;,&quot;address&quot;:&quot;北京市海淀&quot;,&quot;school&quot;:null&#125;&#x27;</span></span><br><span class="line">dict_data=json.loads(json_str)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(json_str))</span><br><span class="line"><span class="built_in">print</span>(dict_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(dict_data))</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/todict.png"></p>
<h2 id="json读写"><a href="#json读写" class="headerlink" title="json读写"></a>json读写</h2><h3 id="写json"><a href="#写json" class="headerlink" title="写json"></a>写json</h3><p><code>dump()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">param = <span class="string">&#x27;&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;Tom&quot;,&quot;address&quot;:&quot;北京市&quot;,&quot;school&quot;:null&#125;&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;../test_write.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(param, f, ensure_ascii=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<h3 id="读json"><a href="#读json" class="headerlink" title="读json"></a>读json</h3><p><code>load()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;../test_write.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>

<h2 id="将登录模块改为json数据驱动"><a href="#将登录模块改为json数据驱动" class="headerlink" title="将登录模块改为json数据驱动"></a>将登录模块改为json数据驱动</h2><p>test_login.py:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> parameterized <span class="keyword">import</span> parameterized</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> po.v4.page.page_login <span class="keyword">import</span> PageLogin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    <span class="comment"># return [(&#x27;abc&#x27;, &#x27;123456&#x27;, &#x27;账号不存在&#x27;), (&#x27;ab&#x27;, &#x27;123123&#x27;, &#x27;密码错误&#x27;)]</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;../data/test_data.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = json.load(f)</span><br><span class="line">        test_list=[]</span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> data:</span><br><span class="line">            test_tuple= (data.get(<span class="string">&quot;username&quot;</span>),data.get(<span class="string">&quot;pwd&quot;</span>),data.get(<span class="string">&quot;expect&quot;</span>))</span><br><span class="line">            test_list.append(test_tuple)</span><br><span class="line">    <span class="keyword">return</span> test_list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建测试类并继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestLogin</span>(unittest.TestCase):</span><br><span class="line">    login = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># setUP</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUpClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 实例化获取页面对象PageLogin</span></span><br><span class="line">        cls.login = PageLogin()</span><br><span class="line">        <span class="comment"># 点击登录</span></span><br><span class="line">        cls.login.page_click_login_link()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># tearDown</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDownClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 关闭驱动对象</span></span><br><span class="line">        cls.login.driver.quit()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @parameterized.expand(<span class="params">get_data(<span class="params"></span>)</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_login</span>(<span class="params">self, username, pwd, expect</span>):</span><br><span class="line">        <span class="comment"># 调用登录方法</span></span><br><span class="line">        self.login.page_login(username, pwd)</span><br><span class="line">        <span class="comment"># 获取登录提示信息</span></span><br><span class="line">        msg = self.login.page_get_text()</span><br><span class="line">        <span class="comment"># 断言</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.assertEqual(msg, expect)</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            <span class="comment"># 截图</span></span><br><span class="line">            self.login.page_get_screenshot()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>json文件：</p>
<p>有几组数据就有几个testcase</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;abc&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pwd&quot;</span><span class="punctuation">:</span> <span class="number">123456</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;账号不存在&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ab&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pwd&quot;</span><span class="punctuation">:</span> <span class="number">1234567</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;密码错误&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pwd&quot;</span><span class="punctuation">:</span> <span class="number">123456</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;账号不合法&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ab&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pwd&quot;</span><span class="punctuation">:</span> <span class="number">12345</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;密码错误&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240419120845726.png"></p>
<p>注意：操作时间过快会导致截图被覆盖，本来要截四张图变成两张</p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240419121218132.png"></p>
<h2 id="网页计算器案例"><a href="#网页计算器案例" class="headerlink" title="网页计算器案例"></a>网页计算器案例</h2><p>base: 查找元素、点击、获取value属性、截图</p>
<p>base&gt;base.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    <span class="comment"># 初始化方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, driver</span>):</span><br><span class="line">        self.driver = driver</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查找元素</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_find_element</span>(<span class="params">self, loc, timeout=<span class="number">30</span>, poll=<span class="number">0.5</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :param loc: 元素的定位信息，格式为元组</span></span><br><span class="line"><span class="string">        :param timeout: 默认超时时间，可以修改</span></span><br><span class="line"><span class="string">        :param poll: 访问频率莫，默认0.5</span></span><br><span class="line"><span class="string">        :return: 返回查找的元素</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> WebDriverWait(self.driver,</span><br><span class="line">                             timeout=timeout,</span><br><span class="line">                             poll_frequency=poll).until(<span class="keyword">lambda</span> x: x.find_element(*loc))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查找元素并点击</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_click</span>(<span class="params">self, loc</span>):</span><br><span class="line">        self.base_find_element(loc).click()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取value</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_value_get</span>(<span class="params">self, loc</span>):</span><br><span class="line">        <span class="comment"># get_attribute()获取属性值</span></span><br><span class="line">        <span class="keyword">return</span> self.base_find_element(loc).get_attribute(<span class="string">&quot;value&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">base_get_screenshot</span>(<span class="params">self</span>):</span><br><span class="line">        self.driver.get_screenshot_as_file(<span class="string">&quot;&#123;&#125;.png&quot;</span>.<span class="built_in">format</span>(time.strftime(<span class="string">&quot;%Y_%m_%d_%H_%M_%S&quot;</span>)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>base&gt;get_driver.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> cal_test <span class="keyword">import</span> page</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GetDriver</span>:</span><br><span class="line">    driver=<span class="literal">None</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_driver</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">if</span> cls.driver <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># 实例化浏览器</span></span><br><span class="line">            cls.driver=webdriver.Chrome()</span><br><span class="line">            <span class="comment"># 最大化</span></span><br><span class="line">            cls.driver.maximize_window()</span><br><span class="line">            <span class="comment"># 打开浏览器</span></span><br><span class="line">            cls.driver.get(page.url)</span><br><span class="line">        <span class="keyword">return</span> cls.driver</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">quit_driver</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">if</span> cls.driver:</span><br><span class="line">            cls.driver.quit()</span><br><span class="line">            cls.driver=<span class="literal">None</span></span><br></pre></td></tr></table></figure>

<p>data：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;calc_001&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;a&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;b&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;calc_002&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;a&quot;</span><span class="punctuation">:</span> <span class="number">33</span><span class="punctuation">,</span><span class="attr">&quot;b&quot;</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span><span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="number">45</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;calc_003&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;a&quot;</span><span class="punctuation">:</span> <span class="number">1212</span><span class="punctuation">,</span><span class="attr">&quot;b&quot;</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span><span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="number">1224</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;calc_004&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;a&quot;</span><span class="punctuation">:</span> <span class="number">1211</span><span class="punctuation">,</span><span class="attr">&quot;b&quot;</span><span class="punctuation">:</span> <span class="number">11</span><span class="punctuation">,</span><span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="number">1222</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;calc_005&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;a&quot;</span><span class="punctuation">:</span> <span class="number">1213</span><span class="punctuation">,</span><span class="attr">&quot;b&quot;</span><span class="punctuation">:</span> <span class="number">13</span><span class="punctuation">,</span><span class="attr">&quot;expect&quot;</span><span class="punctuation">:</span> <span class="number">1226</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>page&gt;_<em>init</em>_.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;以下为计算器配置数据&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="comment"># 数字键有一定的规律，先暂时不定位此键</span></span><br><span class="line"><span class="comment"># 服务器域名地址</span></span><br><span class="line">url=<span class="string">&quot;http://cal.apple886.com/&quot;</span></span><br><span class="line"><span class="comment"># 加号</span></span><br><span class="line">calc_add=By.CSS_SELECTOR,<span class="string">&#x27;#simpleAdd&#x27;</span></span><br><span class="line"><span class="comment"># 等号</span></span><br><span class="line">calc_equal=By.CSS_SELECTOR,<span class="string">&#x27;#simpleEqual&#x27;</span></span><br><span class="line"><span class="comment"># 获取结果</span></span><br><span class="line">calc_res=By.CSS_SELECTOR,<span class="string">&#x27;#resultIpt&#x27;</span></span><br><span class="line"><span class="comment"># 清平</span></span><br><span class="line">calc_clear=By.CSS_SELECTOR,<span class="string">&#x27;#simpleClearAllBtn&#x27;</span></span><br></pre></td></tr></table></figure>

<p>page&gt;page_calc.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> cal_test <span class="keyword">import</span> page</span><br><span class="line"><span class="keyword">from</span> cal_test.base.base <span class="keyword">import</span> Base</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PageCalc</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 点击数字方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_click_num</span>(<span class="params">self, num</span>):</span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">str</span>(num):</span><br><span class="line">            <span class="comment"># 拆开单个按钮的定位方式</span></span><br><span class="line">            loc = By.CSS_SELECTOR, <span class="string">&#x27;#simple&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(n)</span><br><span class="line">            self.base_click(loc)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 点击加号方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_click_add</span>(<span class="params">self</span>):</span><br><span class="line">        self.base_click(page.calc_add)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 点击等号</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_click_eq</span>(<span class="params">self</span>):</span><br><span class="line">        self.base_click(page.calc_equal)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取结果</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_get_res</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.base_value_get(page.calc_res)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 点击清屏</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_clear</span>(<span class="params">self</span>):</span><br><span class="line">        self.base_click(page.calc_clear)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 截屏</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_get_screenshot</span>(<span class="params">self</span>):</span><br><span class="line">        self.base_get_screenshot()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 组装</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">page_add_calc</span>(<span class="params">self, a, b</span>):</span><br><span class="line">        self.page_click_num(a)</span><br><span class="line">        self.page_click_add()</span><br><span class="line">        self.page_click_num(b)</span><br><span class="line">        self.page_click_eq()</span><br></pre></td></tr></table></figure>

<p>scripts：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> parameterized <span class="keyword">import</span> parameterized</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> cal_test.base.get_driver <span class="keyword">import</span> GetDriver</span><br><span class="line"><span class="keyword">from</span> cal_test.page.page_calc <span class="keyword">import</span> PageCalc</span><br><span class="line"><span class="keyword">from</span> cal_test.tools.read_json <span class="keyword">import</span> read_json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    datas = read_json(<span class="string">&quot;calc.json&quot;</span>)</span><br><span class="line">    arrs = []</span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> datas.values():</span><br><span class="line">        arrs.append((data.get(<span class="string">&quot;a&quot;</span>), data.get(<span class="string">&quot;b&quot;</span>), data.get(<span class="string">&quot;expect&quot;</span>)))</span><br><span class="line">    <span class="keyword">return</span> arrs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestCalc</span>(unittest.TestCase):</span><br><span class="line">    driver = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># setup</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUpClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 初始化计算页面对象</span></span><br><span class="line">        cls.driver = GetDriver().get_driver()</span><br><span class="line">        cls.calc = PageCalc(cls.driver)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># teardown()</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tearDownClass</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 关闭driver</span></span><br><span class="line">        GetDriver().quit_driver()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 测试方法</span></span><br><span class="line"><span class="meta">    @parameterized.expand(<span class="params">get_data(<span class="params"></span>)</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_calc</span>(<span class="params">self, a, b, expect</span>):</span><br><span class="line">        <span class="comment"># 调用计算业务方法</span></span><br><span class="line">        self.calc.page_add_calc(a, b)</span><br><span class="line">        <span class="comment"># 断言</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 截图</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.assertEqual(self.calc.page_get_res(), <span class="built_in">str</span>(expect))</span><br><span class="line">        <span class="keyword">except</span> AssertionError:</span><br><span class="line">            self.calc.base_get_screenshot()</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>tools&gt;read_json.py：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导包</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用load方法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_json</span>(<span class="params">filename</span>):</span><br><span class="line">    filepath=<span class="string">&quot;../data/&quot;</span>+filename</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filepath, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">return</span> json.load(f)</span><br></pre></td></tr></table></figure>

<h1 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h1><p>可以查看错误提示信息。日志记录系统运行时的信息</p>
<p>作用：</p>
<ul>
<li>调试程序</li>
<li>了解系统程序运行的情况是否正常</li>
<li>系统程序运行故障分析与问题定位</li>
<li>用来做用户行为分析和数据统计</li>
</ul>
<h2 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h2><p>即日志信息的优先级、重要性或严重程度</p>
<table>
<thead>
<tr>
<th>日志级别</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>DEBUG</td>
<td>调试级别，打印非常详细的日志信息，通常用于对代码的的调试</td>
</tr>
<tr>
<td>INFO</td>
<td>信息级别，打印一般的日志信息，突出强调程序的运行过程</td>
</tr>
<tr>
<td>WARNING</td>
<td>警告级别，打印警告日志信息，潜在错误的情形</td>
</tr>
<tr>
<td>ERROR</td>
<td>错误级别，打印错误异常信息，该级别的错误可能导致系统的一些功能无法正常执行</td>
</tr>
<tr>
<td>CRITICAL</td>
<td>严重错误级别，一个严重错误，系统可能无法继续运行</td>
</tr>
</tbody></table>
<p>为程序指定一个日志级别后，程序会记录所有日志级别大于或等于指定级别的信息。一般建议只使用DEBUG、INFO、WARNING、ERROR</p>
<h2 id="logging模块"><a href="#logging模块" class="headerlink" title="logging模块"></a>logging模块</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="comment"># 调用指定级别，输入日志信息</span></span><br><span class="line">logging.debug(<span class="string">&quot;this is a debug !&quot;</span>)</span><br><span class="line">logging.info(<span class="string">&quot;this is a info&quot;</span>)</span><br><span class="line">logging.warning(<span class="string">&quot;this is a warning&quot;</span>)</span><br><span class="line">logging.error(<span class="string">&quot;this is a error&quot;</span>)</span><br><span class="line">logging.critical(<span class="string">&quot;this is a critical&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>默认设置信息级别是warning</p>
<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240419143730527.png"></p>
<p>设置日志级别：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置级别</span></span><br><span class="line">logging.basicConfig(level=logging.DEBUG)  <span class="comment"># DEBUG是给常量，debug是方法</span></span><br><span class="line"><span class="comment"># 调用指定级别，输入日志信息</span></span><br><span class="line">logging.debug(<span class="string">&quot;this is a debug !&quot;</span>)</span><br><span class="line">logging.info(<span class="string">&quot;this is a info&quot;</span>)</span><br><span class="line">logging.warning(<span class="string">&quot;this is a warning&quot;</span>)</span><br><span class="line">logging.error(<span class="string">&quot;this is a error&quot;</span>)</span><br><span class="line">logging.critical(<span class="string">&quot;this is a critical&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240419143939192.png"></p>
<h2 id="设置日志格式"><a href="#设置日志格式" class="headerlink" title="设置日志格式"></a>设置日志格式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="comment"># 设置格式</span></span><br><span class="line">fmt=<span class="string">&quot;%(asctime)s %(levelname)s [%(name)s] [%(filename)s%(funcName)s:%(lineno)d] - %(message)s&quot;</span></span><br><span class="line"><span class="comment"># 设置级别、格式</span></span><br><span class="line">logging.basicConfig(level=logging.DEBUG,<span class="built_in">format</span>=fmt)  <span class="comment"># DEBUG是给常量，debug是方法</span></span><br><span class="line"><span class="comment"># 调用指定级别，输入日志信息</span></span><br><span class="line">logging.debug(<span class="string">&quot;this is a debug !&quot;</span>)</span><br><span class="line">logging.info(<span class="string">&quot;this is a info&quot;</span>)</span><br><span class="line">logging.warning(<span class="string">&quot;this is a warning&quot;</span>)</span><br><span class="line">logging.error(<span class="string">&quot;this is a error&quot;</span>)</span><br><span class="line">logging.critical(<span class="string">&quot;this is a critical&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240419145251131.png"></p>
<h3 id="保存到文件"><a href="#保存到文件" class="headerlink" title="保存到文件"></a>保存到文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置级别、格式、保存到指定文件</span></span><br><span class="line">logging.basicConfig(level=logging.DEBUG,<span class="built_in">format</span>=fmt,filename=<span class="string">&#x27;..\log\log01.log&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2024/03/12/Web%E8%87%AA%E5%8A%A8%E5%8C%96/image-20240419145510055.png"></p>

                </div>
                
                        
<div class="post-copyright-info-container border-box">
    <div class="copyright-info-content border-box">
        <div class="copyright-info-top border-box">
            <div class="copyright-post-title border-box text-ellipsis">
                Web自动化
            </div>

            <div class="copyright-post-link border-box text-ellipsis">
                2024/03/12/Web自动化/
            </div>
        </div>

        <div class="copyright-info-bottom border-box">
            <div class="copyright-post-author bottom-item">
                <div class="type">
                    Author
                </div>
                <div class="content">Elora</div>
            </div>

            <div class="post-time bottom-item">
                <div class="type">
                    Published
                </div>
                <div class="content">2024-03-12 11:02</div>
            </div>


            <div class="post-license bottom-item">
                <div class="type">
                    License
                </div>
                <div class="content tooltip" data-tooltip-content="CC BY-NC-SA 4.0">
                    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank">
                        
                            <i class="fa-brands fa-creative-commons"></i>
                            <i class="fa-brands fa-creative-commons-by"></i>
                            <i class="fa-brands fa-creative-commons-nc"></i>
                            <i class="fa-brands fa-creative-commons-sa"></i>
                        
                    </a>
                </div>
            </div>
        </div>

        <i class="copyright-bg fa-solid fa-copyright"></i>
    </div>
    <div class="copy-copyright-info flex-center tooltip" data-tooltip-content="Copy copyright info" data-tooltip-offset-y="-2px">
        <i class="fa-solid fa-copy"></i>
    </div>
</div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/test/">test</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                            <div class="post-share-container border-box">
    <ul class="share-list-wrap border-box">
        <li class="qq share-item border-box flex-center tooltip"
            data-tooltip-content="Share to QQ"
        >
            <i class="fa-brands fa-qq"></i>
        </li>
        <li class="wechat share-item border-box flex-center tooltip tooltip-img"
            data-tooltip-content="Share to WeChat"
            data-tooltip-img-tip="Scan by WeChat"
            data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"
        >
            <i class="fa-brands fa-weixin"></i>
        </li>
        <li class="weibo share-item border-box flex-center tooltip"
            data-tooltip-content="Share to WeiBo"
        >
            <i class="fa-brands fa-weibo"></i>
        </li>
    </ul>
</div>

                        
                    </div>
                </div>

                
                    <div class="reward-author-container border-box flex-center">
    <div class="reward-btn keep-button border-box flex-center tooltip tooltip-img"
            data-tooltip-content="请作者喝奶茶"
            data-tooltip-img-url="/images/reward.png"
            data-tooltip-img-trigger="click"
            data-tooltip-img-style="top: -8px;"
    >
        <i class="fa-solid fa-hand-holding-heart"></i>
    </div>
</div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2024/03/25/%E8%AE%A4%E8%AF%86%E8%BD%AF%E4%BB%B6%E5%8F%8A%E6%B5%8B%E8%AF%95/"
                                   title="认识软件及测试"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">认识软件及测试</span>
                                        <span class="post-nav-item">Prev posts</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2024/03/11/Python/"
                                   title="Python"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Python</span>
                                        <span class="post-nav-item">Next posts</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    


    <div class="comments-container border-box">
        <div id="comments-anchor" class="comment-area-title border-box">
            <i class="fas fa-comments"></i>&nbsp;Comments
        </div>
        <div class="comment-plugin-fail border-box">
    <span class="fail-tip">Comment plugin failed to load</span>
    <button class="reload keep-button">Click to reload</button>
</div>
<div class="comment-plugin-loading flex-center border-box">
    <i class="loading-icon fa-solid fa-spinner fa-spin"></i>
    <span class="load-tip">Loading comment plugin</span>
</div>
<script data-pjax>
  window.KeepCommentPlugin = {}
  window.KeepCommentPlugin.hideLoading = () => {
    const cplDom = document.querySelector('.comments-container .comment-plugin-loading')
    cplDom.style.display = 'none'
  }
  window.KeepCommentPlugin.loadFailHandle = () => {
    window.KeepCommentPlugin.hideLoading()
    const cpfDom = document.querySelector('.comments-container .comment-plugin-fail')
    cpfDom.style.display = 'flex'
    cpfDom.querySelector('.reload').addEventListener('click', () => {
      window.location.reload()
    })
  }
</script>

        
            

    <div class="valine-container">
        <div id="vcomments"></div>
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"
                async
                onerror="window.KeepCommentPlugin.loadFailHandle()"
        ></script>
        <script data-pjax
                async
                onerror="window.KeepCommentPlugin.loadFailHandle()"
        >
          window.KeepCommentPlugin.initValine = () => {
            const config = {
              el: '#vcomments',
              appId: 'oKezB5PXBe6SFd75Ab2I1igt-gzGzoHsz',
              appKey: 'ZyjE4IekdBOYhHEQyVhPqWf9',
              meta: ['nick', 'mail', 'link'],
              avatar: 'wavatar',
              enableQQ: true,
              placeholder: 'say something..',
              lang: 'en'.toLowerCase()
            }

            if ('') {
              config.serverURLs = ''
            }

            if (window?.Valine) {
              new Valine(config)
              window.KeepCommentPlugin.hideLoading()
            } else {
              setTimeout(() => {
                window.KeepCommentPlugin.initValine()
              }, 1000)
            }
          }

          if ('true' === 'true') {
            setTimeout(() => {
              window.KeepCommentPlugin.initValine()
            }, 1200)
          } else {
            window.addEventListener('DOMContentLoaded', window.KeepCommentPlugin.initValine)
          }
        </script>
    </div>


        
    </div>





                
            </div>
        </div>

        
            <div class="pc-post-toc left-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%83%E7%B4%A0%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.</span> <span class="nav-text">元素定位</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#id%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.1.</span> <span class="nav-text">id定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#name%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.2.</span> <span class="nav-text">name定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#class-name%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.3.</span> <span class="nav-text">class name定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tag-name%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.4.</span> <span class="nav-text">tag_name定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#link-text"><span class="nav-number">1.5.</span> <span class="nav-text">link_text</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#partial-link-text"><span class="nav-number">1.6.</span> <span class="nav-text">partial_link_text</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Xpath"><span class="nav-number">1.7.</span> <span class="nav-text">Xpath</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%B7%AF%E5%BE%84%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.7.1.</span> <span class="nav-text">通过路径定位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E5%85%83%E7%B4%A0%E5%B1%9E%E6%80%A7"><span class="nav-number">1.7.2.</span> <span class="nav-text">利用元素属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E5%92%8C%E9%80%BB%E8%BE%91%E7%BB%93%E5%90%88"><span class="nav-number">1.7.3.</span> <span class="nav-text">属性和逻辑结合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%82%E7%BA%A7%E4%B8%8E%E5%B1%9E%E6%80%A7%E7%BB%93%E5%90%88"><span class="nav-number">1.7.4.</span> <span class="nav-text">层级与属性结合</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#css%E9%80%89%E6%8B%A9%E5%99%A8"><span class="nav-number">1.8.</span> <span class="nav-text">css选择器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E4%B8%8B%E6%8B%89%E6%A1%86"><span class="nav-number">1.8.1.</span> <span class="nav-text">定位下拉框</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87css%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.8.1.1.</span> <span class="nav-text">通过css定位</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87select%E7%B1%BB%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.8.1.2.</span> <span class="nav-text">通过select类定位</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AD%A6%E5%91%8A%E6%A1%86%E5%A4%84%E7%90%86"><span class="nav-number">1.8.2.</span> <span class="nav-text">警告框处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#aler%E8%AD%A6%E5%91%8A%E6%A1%86"><span class="nav-number">1.8.2.1.</span> <span class="nav-text">aler警告框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#confirm%E7%A1%AE%E8%AE%A4%E6%A1%86"><span class="nav-number">1.8.2.2.</span> <span class="nav-text">confirm确认框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#prompt%E6%8F%90%E7%A4%BA%E6%A1%86"><span class="nav-number">1.8.2.3.</span> <span class="nav-text">prompt提示框</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%83%E7%B4%A0%E6%93%8D%E4%BD%9C"><span class="nav-number">1.9.</span> <span class="nav-text">元素操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0%E4%BF%A1%E6%81%AF%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">1.9.1.</span> <span class="nav-text">获取元素信息的常用方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">1.10.</span> <span class="nav-text">浏览器常用操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%BC%A0%E6%A0%87%E5%92%8C%E9%94%AE%E7%9B%98%E6%93%8D%E4%BD%9C"><span class="nav-number">2.</span> <span class="nav-text">鼠标和键盘操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BC%A0%E6%A0%87%E6%93%8D%E4%BD%9C"><span class="nav-number">2.1.</span> <span class="nav-text">鼠标操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%94%AE%E7%9B%98%E6%93%8D%E4%BD%9C"><span class="nav-number">2.2.</span> <span class="nav-text">键盘操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%83%E7%B4%A0%E7%AD%89%E5%BE%85"><span class="nav-number">3.</span> <span class="nav-text">元素等待</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9A%90%E5%BC%8F%E7%AD%89%E5%BE%85"><span class="nav-number">3.1.</span> <span class="nav-text">隐式等待</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E5%BC%8F%E7%AD%89%E5%BE%85"><span class="nav-number">3.2.</span> <span class="nav-text">显式等待</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BA%E5%88%AB"><span class="nav-number">3.2.1.</span> <span class="nav-text">区别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">4.</span> <span class="nav-text">滚动条操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#frame%E5%88%87%E6%8D%A2"><span class="nav-number">5.</span> <span class="nav-text">frame切换</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#frame%E5%88%87%E6%8D%A2%E6%96%B9%E6%B3%95"><span class="nav-number">5.1.</span> <span class="nav-text">frame切换方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E5%88%87%E6%8D%A2"><span class="nav-number">6.</span> <span class="nav-text">窗口切换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E6%88%AA%E5%9B%BE%E4%B8%8E%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="nav-number">7.</span> <span class="nav-text">窗口截图与验证码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E6%88%AA%E5%9B%BE"><span class="nav-number">7.1.</span> <span class="nav-text">窗口截图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="nav-number">7.2.</span> <span class="nav-text">验证码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cookie"><span class="nav-number">7.3.</span> <span class="nav-text">cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#selenium%E6%93%8D%E4%BD%9Ccookie"><span class="nav-number">7.3.1.</span> <span class="nav-text">selenium操作cookie</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B"><span class="nav-number">8.</span> <span class="nav-text">登录测试案例</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PO%E6%A8%A1%E5%BC%8F"><span class="nav-number">9.</span> <span class="nav-text">PO模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#v1"><span class="nav-number">9.1.</span> <span class="nav-text">v1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v2"><span class="nav-number">9.2.</span> <span class="nav-text">v2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v3"><span class="nav-number">9.3.</span> <span class="nav-text">v3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v4"><span class="nav-number">9.4.</span> <span class="nav-text">v4</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8"><span class="nav-number">10.</span> <span class="nav-text">数据驱动</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#python%E5%AD%97%E5%85%B8%E5%92%8Cjson%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">10.1.</span> <span class="nav-text">python字典和json之间的转换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#python%E5%AD%97%E5%85%B8%E2%80%93-json%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">10.1.1.</span> <span class="nav-text">python字典–&gt;json字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#json%E5%AD%97%E7%AC%A6%E4%B8%B2%E2%80%93-dict"><span class="nav-number">10.1.2.</span> <span class="nav-text">json字符串–&gt;dict</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#json%E8%AF%BB%E5%86%99"><span class="nav-number">10.2.</span> <span class="nav-text">json读写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%99json"><span class="nav-number">10.2.1.</span> <span class="nav-text">写json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BBjson"><span class="nav-number">10.2.2.</span> <span class="nav-text">读json</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%86%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97%E6%94%B9%E4%B8%BAjson%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8"><span class="nav-number">10.3.</span> <span class="nav-text">将登录模块改为json数据驱动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E9%A1%B5%E8%AE%A1%E7%AE%97%E5%99%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">10.4.</span> <span class="nav-text">网页计算器案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%97%A5%E5%BF%97"><span class="nav-number">11.</span> <span class="nav-text">日志</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="nav-number">11.1.</span> <span class="nav-text">日志级别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#logging%E6%A8%A1%E5%9D%97"><span class="nav-number">11.2.</span> <span class="nav-text">logging模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="nav-number">11.3.</span> <span class="nav-text">设置日志格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E5%88%B0%E6%96%87%E4%BB%B6"><span class="nav-number">11.3.1.</span> <span class="nav-text">保存到文件</span></a></li></ol></li></ol></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="border-box website-info-box default">
        
            <div class="copyright-info info-item default">
                &copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2024
                
                    &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">Elora</a>
                
            </div>

            <div class="theme-info info-item default">
                Powered by&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;&&nbsp;Theme&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
            </div>

            

            
                
                <div class="deploy-info info-item default">
                    
                        This site is deployed on <span class="tooltip" data-tooltip-content="GitHub Pages"><img src="/images/deploy-provider/github.png"></span>
                    
                </div>
            
        

        <div class="count-item info-item default">
            
                <span class="count-box border-box word">
                    <span class="item-type border-box">Total words</span>
                    <span class="item-value border-box word">71.5k</span>
                </span>
            

            
                <span class="count-box border-box uv">
                    <span class="item-type border-box">Unique Visitor</span>
                    <span class="item-value border-box uv" id="busuanzi_value_site_uv"></span>
                </span>
            

            
                <span class="count-box border-box pv">
                    <span class="item-type border-box">Page View</span>
                    <span class="item-value border-box pv" id="busuanzi_value_site_pv"></span>
                </span>
            
        </div>
    </div>
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools left-toc">
            <div class="post-tools-container border-box">
    <ul class="tools-list border-box">
        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        
            <li class="tools-item flex-center go-to-comments">
                <i class="fas fa-comment"></i>
                <span class="post-comments-count"></span>
            </li>
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-toggle-theme-mode flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        
            <li class="tools-item go-to-comments-tablet flex-center">
                <i class="fas fa-comment"></i>
            </li>
        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%83%E7%B4%A0%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.</span> <span class="nav-text">元素定位</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#id%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.1.</span> <span class="nav-text">id定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#name%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.2.</span> <span class="nav-text">name定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#class-name%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.3.</span> <span class="nav-text">class name定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tag-name%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.4.</span> <span class="nav-text">tag_name定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#link-text"><span class="nav-number">1.5.</span> <span class="nav-text">link_text</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#partial-link-text"><span class="nav-number">1.6.</span> <span class="nav-text">partial_link_text</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Xpath"><span class="nav-number">1.7.</span> <span class="nav-text">Xpath</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%B7%AF%E5%BE%84%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.7.1.</span> <span class="nav-text">通过路径定位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E5%85%83%E7%B4%A0%E5%B1%9E%E6%80%A7"><span class="nav-number">1.7.2.</span> <span class="nav-text">利用元素属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E5%92%8C%E9%80%BB%E8%BE%91%E7%BB%93%E5%90%88"><span class="nav-number">1.7.3.</span> <span class="nav-text">属性和逻辑结合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%82%E7%BA%A7%E4%B8%8E%E5%B1%9E%E6%80%A7%E7%BB%93%E5%90%88"><span class="nav-number">1.7.4.</span> <span class="nav-text">层级与属性结合</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#css%E9%80%89%E6%8B%A9%E5%99%A8"><span class="nav-number">1.8.</span> <span class="nav-text">css选择器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E4%B8%8B%E6%8B%89%E6%A1%86"><span class="nav-number">1.8.1.</span> <span class="nav-text">定位下拉框</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87css%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.8.1.1.</span> <span class="nav-text">通过css定位</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87select%E7%B1%BB%E5%AE%9A%E4%BD%8D"><span class="nav-number">1.8.1.2.</span> <span class="nav-text">通过select类定位</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AD%A6%E5%91%8A%E6%A1%86%E5%A4%84%E7%90%86"><span class="nav-number">1.8.2.</span> <span class="nav-text">警告框处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#aler%E8%AD%A6%E5%91%8A%E6%A1%86"><span class="nav-number">1.8.2.1.</span> <span class="nav-text">aler警告框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#confirm%E7%A1%AE%E8%AE%A4%E6%A1%86"><span class="nav-number">1.8.2.2.</span> <span class="nav-text">confirm确认框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#prompt%E6%8F%90%E7%A4%BA%E6%A1%86"><span class="nav-number">1.8.2.3.</span> <span class="nav-text">prompt提示框</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%83%E7%B4%A0%E6%93%8D%E4%BD%9C"><span class="nav-number">1.9.</span> <span class="nav-text">元素操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0%E4%BF%A1%E6%81%AF%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">1.9.1.</span> <span class="nav-text">获取元素信息的常用方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">1.10.</span> <span class="nav-text">浏览器常用操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%BC%A0%E6%A0%87%E5%92%8C%E9%94%AE%E7%9B%98%E6%93%8D%E4%BD%9C"><span class="nav-number">2.</span> <span class="nav-text">鼠标和键盘操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BC%A0%E6%A0%87%E6%93%8D%E4%BD%9C"><span class="nav-number">2.1.</span> <span class="nav-text">鼠标操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%94%AE%E7%9B%98%E6%93%8D%E4%BD%9C"><span class="nav-number">2.2.</span> <span class="nav-text">键盘操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%83%E7%B4%A0%E7%AD%89%E5%BE%85"><span class="nav-number">3.</span> <span class="nav-text">元素等待</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9A%90%E5%BC%8F%E7%AD%89%E5%BE%85"><span class="nav-number">3.1.</span> <span class="nav-text">隐式等待</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E5%BC%8F%E7%AD%89%E5%BE%85"><span class="nav-number">3.2.</span> <span class="nav-text">显式等待</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BA%E5%88%AB"><span class="nav-number">3.2.1.</span> <span class="nav-text">区别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">4.</span> <span class="nav-text">滚动条操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#frame%E5%88%87%E6%8D%A2"><span class="nav-number">5.</span> <span class="nav-text">frame切换</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#frame%E5%88%87%E6%8D%A2%E6%96%B9%E6%B3%95"><span class="nav-number">5.1.</span> <span class="nav-text">frame切换方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E5%88%87%E6%8D%A2"><span class="nav-number">6.</span> <span class="nav-text">窗口切换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E6%88%AA%E5%9B%BE%E4%B8%8E%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="nav-number">7.</span> <span class="nav-text">窗口截图与验证码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E6%88%AA%E5%9B%BE"><span class="nav-number">7.1.</span> <span class="nav-text">窗口截图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="nav-number">7.2.</span> <span class="nav-text">验证码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cookie"><span class="nav-number">7.3.</span> <span class="nav-text">cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#selenium%E6%93%8D%E4%BD%9Ccookie"><span class="nav-number">7.3.1.</span> <span class="nav-text">selenium操作cookie</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B"><span class="nav-number">8.</span> <span class="nav-text">登录测试案例</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PO%E6%A8%A1%E5%BC%8F"><span class="nav-number">9.</span> <span class="nav-text">PO模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#v1"><span class="nav-number">9.1.</span> <span class="nav-text">v1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v2"><span class="nav-number">9.2.</span> <span class="nav-text">v2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v3"><span class="nav-number">9.3.</span> <span class="nav-text">v3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v4"><span class="nav-number">9.4.</span> <span class="nav-text">v4</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8"><span class="nav-number">10.</span> <span class="nav-text">数据驱动</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#python%E5%AD%97%E5%85%B8%E5%92%8Cjson%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">10.1.</span> <span class="nav-text">python字典和json之间的转换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#python%E5%AD%97%E5%85%B8%E2%80%93-json%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">10.1.1.</span> <span class="nav-text">python字典–&gt;json字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#json%E5%AD%97%E7%AC%A6%E4%B8%B2%E2%80%93-dict"><span class="nav-number">10.1.2.</span> <span class="nav-text">json字符串–&gt;dict</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#json%E8%AF%BB%E5%86%99"><span class="nav-number">10.2.</span> <span class="nav-text">json读写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%99json"><span class="nav-number">10.2.1.</span> <span class="nav-text">写json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BBjson"><span class="nav-number">10.2.2.</span> <span class="nav-text">读json</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%86%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97%E6%94%B9%E4%B8%BAjson%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8"><span class="nav-number">10.3.</span> <span class="nav-text">将登录模块改为json数据驱动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E9%A1%B5%E8%AE%A1%E7%AE%97%E5%99%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">10.4.</span> <span class="nav-text">网页计算器案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%97%A5%E5%BF%97"><span class="nav-number">11.</span> <span class="nav-text">日志</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="nav-number">11.1.</span> <span class="nav-text">日志级别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#logging%E6%A8%A1%E5%9D%97"><span class="nav-number">11.2.</span> <span class="nav-text">logging模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="nav-number">11.3.</span> <span class="nav-text">设置日志格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E5%88%B0%E6%96%87%E4%BB%B6"><span class="nav-number">11.3.1.</span> <span class="nav-text">保存到文件</span></a></li></ol></li></ol></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>



<!-- common -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local-search -->

    
<script src="/js/local-search.js"></script>



<!-- lazyload -->


<div class="pjax">
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        
            
<script src="/js/post/toc.js"></script>

        

        <!-- copyright-info -->
        
            
<script src="/js/post/copyright-info.js"></script>

        

        <!-- share -->
        
            
<script src="/js/post/share.js"></script>

        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->

    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart()
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd()
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'))
            KEEP.initExecute()
        });
    });
</script>




<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>

<script type="text/javascript" src="/js/funnytitle.js"></script>
<script type="text/javascript" src="/js/love.js"></script>
